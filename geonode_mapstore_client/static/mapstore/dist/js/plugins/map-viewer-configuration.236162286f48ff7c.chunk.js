"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[16164],{53645:(e,n,r)=>{r.r(n),r.d(n,{default:()=>j});var l=r(558422),o=r.n(l),t=r(171703),i=r(441609),u=r.n(i),a=r(22222),c=r(693473),s=r(322843),d=r(643892),v=r(805346),E=r(532425),g=r(535721),m=r(694745),p=r(399534),f=r(205342),R=r(12530),y=r(782904),w=r(17594),O=r(299392),b=["hide","loading","labelId","showLoader"],k=["linkedResources"];function C(){return C=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var l in r)({}).hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},C.apply(null,arguments)}function I(e,n){if(null==e)return{};var r,l,o=function(e,n){if(null==e)return{};var r={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(n.includes(l))continue;r[l]=e[l]}return r}(e,n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(l=0;l<t.length;l++)r=t[l],n.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var h=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).resourceType;return e?o().createElement("div",{className:"gn-resource-delete-warning"},o().createElement(w.Z,{className:"warning",name:"warning"})," Â ",o().createElement(v.Z,{msgId:"gnviewer.linkedResource.deleteAndUnlinkWarning.".concat(e)})):null},_=(0,t.connect)((0,a.P1)([function(e){var n,r;return null==e||null===(n=e.controls)||void 0===n||null===(r=n[R.zj.REMOVE_LINKED_RESOURCE])||void 0===r?void 0:r.value},function(e){var n,r;return null==e||null===(n=e.controls)||void 0===n||null===(r=n[R.zj.REMOVE_LINKED_RESOURCE])||void 0===r?void 0:r.loading},O.yK],(function(e,n,r){var l;return{resources:null!==(l=null==e?void 0:e.resources)&&void 0!==l?l:[],resourceType:null==e?void 0:e.resourceType,enabled:!u()(null==e?void 0:e.resources),loading:n,source:null==r?void 0:r.pk}})),{onRemove:d.d7,onDelete:d.EU.bind(null,R.zj.REMOVE_LINKED_RESOURCE),onClose:y.Xg.bind(null,R.zj.REMOVE_LINKED_RESOURCE,"value",void 0)})((function(e){var n=e.enabled,r=e.resources,l=void 0===r?[]:r,t=e.onClose,i=void 0===t?function(){}:t,a=e.onDelete,c=void 0===a?function(){}:a,s=e.onRemove,d=void 0===s?function(){}:s,g=e.loading,y=e.resourceType,w=e.source,O=function(){var e=l.map((function(e){return null==e?void 0:e.pk}));u()(w)||u()(e)||!y||d({resourceType:y,source:w,target:e,processType:R.zj.REMOVE_LINKED_RESOURCE})};return o().createElement(p.Z,null,o().createElement(m.Z,{title:o().createElement(v.Z,{msgId:"gnviewer.linkedResource.deleteTitle",msgParams:{count:l.length}}),show:n,fitContent:!0,clickOutEnabled:!1,modalClassName:"gn-simple-dialog",buttons:g?[]:[{text:o().createElement(v.Z,{msgId:"gnviewer.deleteResourceNo",msgParams:{count:l.length}}),onClick:function(){O(),i()}},{text:o().createElement(v.Z,{msgId:"gnviewer.deleteResourceYes",msgParams:{count:l.length}}),bsStyle:"danger",onClick:function(){O(),c(l)}}],onClose:g?null:function(){return i()}},o().createElement("ul",{className:"gn-card-grid",style:{listStyleType:"none",padding:"0.5rem",margin:0}},l.map((function(e,n){return o().createElement("li",{style:{padding:"0.25rem 0"},key:e.pk+"-"+n},o().createElement(f.Z,{data:e,layoutCardsStyle:"list",readOnly:!0}))}))),o().createElement(h,{resourceType:y}),g&&o().createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"}},o().createElement(E.Z,{size:70}))))})),L=function(e){var n=e.hide,r=e.loading,l=e.labelId,t=e.showLoader,i=I(e,b);return n?null:o().createElement(c.Z,C({},i,{disabled:r,style:{display:"flex",alignItems:"center",gap:10}}),o().createElement(v.Z,{msgId:null!=l?l:"gnviewer.linkedResource.remove"}),r&&t&&o().createElement(E.Z,{size:12}))},N=(0,t.connect)((function(e){var n,r,l,o;return{loading:null==e||null===(n=e.controls)||void 0===n||null===(r=n[R.zj.REMOVE_LINKED_RESOURCE])||void 0===r?void 0:r.loading,viewerLinkedResource:null==e||null===(l=e.gnresource)||void 0===l?void 0:l.viewerLinkedResource,resource:null==e||null===(o=e.gnresource)||void 0===o?void 0:o.data}}),{onRemove:d.d7,onDelete:y.Xg.bind(null,R.zj.REMOVE_LINKED_RESOURCE,"value")})((function(e){var n,r,l=g.P6.VIEWER,t=null!==(n=e.viewerLinkedResource)&&void 0!==n?n:{},i=t.linkedResources,a=I(t,k),c=1===(null==i||null===(r=i.linkedBy)||void 0===r?void 0:r.length);return o().createElement(L,C({},e,{showLoader:!c,onClick:function(){if(c)e.onDelete({resources:[a],resourceType:l});else{var n,r=null===(n=e.resource)||void 0===n?void 0:n.pk,o=null==a?void 0:a.pk;u()(r)||u()(o)||!l||e.onRemove({resourceType:l,source:r,target:o,processType:R.zj.REMOVE_LINKED_RESOURCE})}},labelId:"gnviewer.removeViewerConfiguration"}))})),V=(0,t.connect)((function(e){var n,r,l,o;return{loading:null==e||null===(n=e.controls)||void 0===n||null===(r=n[R.zj.REMOVE_LINKED_RESOURCE])||void 0===r?void 0:r.loading,resourceParams:null==e||null===(l=e.gnresource)||void 0===l?void 0:l.params,resource:null==e||null===(o=e.gnresource)||void 0===o?void 0:o.data}}),{})((function(e){var n,r;return o().createElement(L,C({},e,{href:"#/viewer/"+(null===(n=e.resourceParams)||void 0===n?void 0:n.appPk)+"/map/"+(null===(r=e.resource)||void 0===r?void 0:r.pk),labelId:"gnviewer.editViewerConfiguration"}))}));const j=(0,s.rx)("MapViewerConfiguration",{component:_,containers:{ActionNavbar:[{name:"RemoveMapViewer",Component:N},{name:"EditMapViewer",Component:V}]},epics:{},reducers:{}})}}]);