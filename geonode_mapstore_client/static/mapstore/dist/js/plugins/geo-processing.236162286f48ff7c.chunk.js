(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[76375],{460604:(e,t,r)=>{"use strict";r.d(t,{hn:()=>n,yg:()=>o,vD:()=>i,jJ:()=>a,oy:()=>l,am:()=>u,W:()=>s,B1:()=>c,YP:()=>f,fU:()=>d,cY:()=>y});var n="ADDITIONALLAYER:ADD_ADDITIONAL_LAYERS",o="ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",i="ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",a="ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",l="ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",u="ADDITIONALLAYER:MERGE_OPTIONS_BY_OWNER",s=function(e,t){return{type:a,id:e,owner:t,actionType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",options:arguments.length>3?arguments[3]:void 0}},c=function(e,t){return{type:l,owner:e,options:t}},f=function(e,t){return{type:u,owner:e,options:t}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.owner;return{type:o,id:t,owner:r}},y=function(e){return{type:i,owner:e}}},604206:(e,t,r)=>{"use strict";r.d(t,{hZ:()=>n,pb:()=>o,kD:()=>i,DI:()=>a,IC:()=>l,uB:()=>c,Rh:()=>f,G_:()=>d,vU:()=>y,Vw:()=>g,KD:()=>p,uj:()=>v,lo:()=>m,Yf:()=>b,fo:()=>P,PY:()=>S,bp:()=>E,oJ:()=>h,k4:()=>I,sc:()=>T,Li:()=>O});var n="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",l="DRAW:DRAW_SUPPORT_STOPPED",u="DRAW:FEATURES_SELECTED",s="DRAW:DRAWING_FEATURES",c="DRAW:SET_SNAPPING_LAYER",f="DRAW:SNAPPING_IS_LOADING",d="DRAW:TOGGLE_SNAPPING",y="DRAW:SET_SNAPPING_CONFIG";function g(e,t,r,n,o){return{type:a,features:e,owner:t,enableEdit:r,textChanged:n,circleChanged:o}}function p(){return{type:u,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function v(){return{type:s,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function m(){return{type:l}}function b(e,t,r,o,i,a){return{type:n,status:e,method:t,owner:r,features:o,options:i,style:a}}function P(e,t){return{type:o,geometry:e,owner:t}}function S(e){return{type:i,currentStyle:e}}var E=function(e){return b("clean","",e,[],{})};function h(){return{type:d}}function I(e){return{type:c,snappingLayer:e}}function T(){return{type:f}}function O(e,t,r){return{type:y,value:e,prop:t,pluginCfg:r}}},591884:(e,t,r)=>{"use strict";r.d(t,{H:()=>T,k:()=>O});var n=r(580416),o=r(501157),i=r(577215),a=r(432420),l=r(375875),u=r(472500),s=r.n(u),c=r(727418),f=r.n(c),d=r(505055),y=r.n(d),g=r(611847);const p={describeCoverage:function(e,t){var r=s().parse((0,g.eW)(e),!0),n=s().format(f()({},r,{query:f()({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},r.query)}));return l.Z.get(n).then((function(e){var t;return y().parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t}))}};var v=r(624262),m=r(227361),b=r.n(m),P=r(838848);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return(t=function(e){var t=function(e){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t,r){return function(i){return o.ZP.describeLayer(e,t.name,r).then((function(r){return r&&"WFS"===r.owsType?a.v$(e,r.name).then((function(e){return r.geometryType=(0,P.mI)(e),i((0,n.tV)(t.id,"id",{describeLayer:r,describeFeatureType:e}))})).catch((function(){return i((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe feature found"}}))})):(r&&"WCS"===r.owsType&&p.describeCoverage(e,r.name).then((function(e){var o=b()(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");r.bands=o&&"string"==typeof o?["1"]:o.map((function(e,t){return t+1+""})),i((0,n.tV)(t.id,"id",{describeLayer:r,describeCoverage:e}))})).catch((function(){return i((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe coverage found"}}))})),i((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe Layer found"}})))})).catch((function(e){return i((0,n.tV)(t.id,"id",{describeLayer:{error:e.status}}))}))}}function O(e){var t=(0,v.Fh)(e);return function(r){return r((0,n.tV)(e.id,"id",{capabilitiesLoading:!0})),o.ZP.getCapabilities(t).then((function(t){var a=o.ZP.parseLayerCapabilities(t,e);r(a?(0,n.tV)(e.id,"id",h(h({},(0,i.Br)(a)),{},{capabilitiesLoading:null})):(0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))})).catch((function(t){r((0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))}))}}},362520:(e,t,r)=>{"use strict";r.d(t,{dn:()=>n,NS:()=>o,Kn:()=>i,FV:()=>a,Vd:()=>l,yS:()=>u});var n="MAP_LAYOUT:UPDATE_MAP_LAYOUT",o="MAP_LAYOUT:UPDATE_DOCK_PANELS",i="MAP_LAYOUT:FORCE_UPDATE_MAP_LAYOUT";function a(e){return{type:n,layout:e}}function l(e){return{type:o,name:e,action:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",location:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right"}}function u(){return{type:i}}},249243:(e,t,r)=>{"use strict";r.d(t,{y:()=>m});var n=r(747037),o=r.n(n),i=r(414293),a=r.n(i),l=r(49977),u=r(667348),s=r(375875),c=r(307887),f=r(453005);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=function(e){var t=function(e){if("object"!=d(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e,t,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},d=i.attachJSON,g=i.itemId,v=void 0===g?null:g,m=(0,u.pf)(r,e,t)?function(t){return(0,u.pf)(r,e,t)}:function(t){return l.Observable.defer((function(){return s.Z.get(e,{params:t})}))};return d&&!(0,u.Ku)(t)?l.Observable.forkJoin(m(t),m(p(p({},t),{},{info_format:null!=r&&null!==(n=r.infoFormats)&&void 0!==n&&n.includes(f.qk)?f.qk:f.CV})).map((function(e){return e.data})).catch((function(){return l.Observable.of({})}))).map((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];return p(p({},o),{},{features:i&&i.features&&i.features.filter((function(e){return!!a()(v)||e.id===v})),featuresCrs:i&&i.crs&&(0,c.parseURN)(i.crs)})})):m(t).map((function(e){return e.data})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{data:o()(e)?e:p(p({},e),{},{features:e.features&&e.features.filter((function(e){return!v||e.id===v}))}),features:e.features&&e.features.filter((function(e){return!v||e.id===v})),featuresCrs:e&&e.crs&&(0,c.parseURN)(e.crs)}}))}},638445:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(558422),o=r.n(n),i=r(271418),a=r(697111),l=r(993451),u=["debounceTime"],s=["fallbackValue"];function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(null,arguments)}function y(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var g=(0,a.Z)("onChange","value")((0,l.Z)("placeholder")((function(e){e.debounceTime;var t=y(e,u);return o().createElement(i.NI,d({},t,{onChange:function(e){return t.onChange(e.target.value)}}))})));const p=function(e){var t,r,i=e.fallbackValue,a=y(e,s),l=c((0,n.useState)(null!==(t=a.value)&&void 0!==t?t:i),2),u=l[0],f=l[1],p=c((0,n.useState)(null!==(r=a.value)&&void 0!==r?r:i),2),v=p[0],m=p[1],b=c((0,n.useState)(0),2),P=b[0],S=b[1],E=(0,n.useRef)(!1),h=(0,n.useRef)();function I(e){var t=!isNaN(parseFloat(e));return t&&void 0!==a.min&&e<a.min?{changed:!0,value:a.min}:t&&void 0!==a.max&&e>a.max?{changed:!0,value:a.max}:{changed:!1,value:t?parseFloat(e):e}}return h.current=u,(0,n.useEffect)((function(){var e;h.current!==a.value&&f(null!==(e=a.value)&&void 0!==e?e:i)}),[a.value]),o().createElement(g,d({},a,{key:P,value:u,onChange:function(e){if(E.current){var t=e,r=!0;if("number"===a.type){var n=I(t).changed;(""===t||n)&&(r=!1)}f(t),r&&a.onChange(t)}},onChangeNoDebounce:m,onBlur:function(){if("number"===a.type)if(""===v)a.onChange(void 0),f(i),S((function(e){return e+1}));else{var e=I(v).value;a.onChange(e),S((function(e){return e+1})),f(e)}E.current=!1},onFocus:function(){E.current=!0}}))}},82110:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(558422),o=r.n(n),i=r(496259),a=r(532425);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f=function(e){var t=e.width,r=e.height,n=e.className,l=void 0===n?"loader-container":n,u=e.contentStyle,c=void 0===u?{}:u;return o().createElement("div",{className:l},o().createElement(i.Z,null,(function(e){var n=e.width,i=void 0===n?200:n,l=e.height,u=void 0===l?200:l,f=t||(u>0?Math.min(i,u):i),d=r||(u>0?Math.min(i,u):i),y=Math.min(f,d);return o().createElement(a.Z,{size:y,style:s({padding:y/10,margin:"auto",display:"flex"},c)})})))}},962909:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(558422),o=r.n(n),i=r(843614),a=r(805346),l=r(624847);const u=function(e){var t=e.title,r=void 0===t?o().createElement(a.Z,{msgId:"warning"}):t,n=e.cancelText,u=void 0===n?o().createElement(a.Z,{msgId:"no"}):n,s=e.confirmText,c=void 0===s?o().createElement(a.Z,{msgId:"yes"}):s,f=e.onClose,d=void 0===f?function(){}:f,y=e.onConfirm,g=void 0===y?function(){}:y,p=e.show,v=e.children,m=e.className,b=void 0===m?"":m,P=e.buttonSize,S=e.running,E=void 0!==S&&S,h=o().createElement("span",{role:"footer"},o().createElement("div",{style:{float:"left"}}),o().createElement(l.Z,{disabled:E,className:b,key:"confirmButton",bsStyle:"primary",bsSize:P,onClick:function(){g()}},c),o().createElement(l.Z,{key:"cancelButton",bsSize:P,disabled:E,onClick:d},u));return o().createElement(i.Z,{show:p,onHide:d},o().createElement(i.Z.Header,{key:"dialogHeader",closeButton:!0},o().createElement(i.Z.Title,null,r)),o().createElement(i.Z.Body,null,v),o().createElement(i.Z.Footer,null,h))}},886850:(e,t,r)=>{"use strict";r.d(t,{V6:()=>M,Mc:()=>W,v$:()=>U,ED:()=>B});var n=r(472500),o=r.n(n),i=r(701469),a=r.n(i),l=r(984596),u=r.n(l),s=r(414293),c=r.n(s),f=r(513218),d=r.n(f),y=r(49977),g=r.n(y),p=r(505055),v=r(507526),m=r(375875),b=r(428913),P=r(624262),S=r(510284),E=r(439156),h=r.n(E),I=r(611847),T=["totalFeatures","features"],O=["sortOptions","propertyName"];function A(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function w(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return(t=function(e){var t=function(e){if("object"!=G(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==G(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D=h()({wfsVersion:"1.1.0"}),N=D.getFeature,R=D.query,Z=D.sortBy,x=D.propertyName,_=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json",i=(0,b.getWFSFilterData)(t,r),a=o().parse((0,I.eW)(e),!0),l=d()(a.query)?a.query:{};l.service="WFS",l.outputFormat=n;var u=o().format({protocol:a.protocol,host:a.host,pathname:a.pathname,query:l});return r.layer&&"vector"===r.layer.type?g().Observable.defer((function(){return new Promise((function(e){var n,o=function(e,t){if(t.filterFields&&0!==t.filterFields.length){var r=e.features.filter((0,b.createFeatureFilter)(t));e.features=r,e.numberMatched=r.length,e.numberReturned=r.length,e.totalFeatures=r.length}return t.sortOptions&&t.sortOptions.sortBy&&t.sortOptions.sortOrder&&"NONE"!==t.sortOptions.sortOrder&&e.features.sort((function(e,r){var n=e.properties[t.sortOptions.sortBy],o=r.properties[t.sortOptions.sortBy],i=n.toLowerCase().localeCompare(o.toLowerCase());return"ASC"===t.sortOptions.sortOrder?i:-1*i})),e}({crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}},numberMatched:(n=r.layer.features).length,numberReturned:n.length,timeStamp:"2020-07-20T11:36:20.118Z",totalFeatures:n.length,type:"FeatureCollection",features:n},t);e(o)}))})):{data:i,queryString:u}},M=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(r.layer&&"vector"===r.layer.type)return _(e,t,r,n);var o=_(e,t,r,n),i=o.data,a=o.queryString;return g().Observable.defer((function(){return m.Z.post(a,i,{timeout:6e4,responseType:"arraybuffer",headers:{Accept:"application/xml","Content-Type":"application/xml"}})}))},k=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.layer&&"vector"===r.layer.type)return _(e,t,r);var n=_(e,t,r),o=n.data,i=n.queryString;return g().Observable.defer((function(){return m.Z.post(i,o,F({timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}},null==r?void 0:r.requestOptions))})).let(S.oB).map((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.totalFeatures,r=e.features,n=w(e,T),o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).startIndex,i=arguments.length>2?arguments[2]:void 0;return i>t&&i===o+r.length&&t===r.length?F(F({},n),{},{features:r,totalFeatures:i}):F(F({},n),{},{features:r,totalFeatures:t})}(e.data,function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination||!c()(e.startIndex)&&!c()(e.maxFeatures)&&{startIndex:e.startIndex,maxFeatures:e.maxFeatures}}(t,r),r.totalFeatures)}))},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,r=void 0===t?{}:t,n=e.url,o=e.name,i=arguments.length>1?arguments[1]:void 0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=l.sortOptions,c=l.propertyName,f=w(l,O);return k(r.url||n,i&&"object"===G(i)?F(F({},i),{},{typeName:o||i.typeName}):N(R(o,[].concat(A(s?[Z(s.sortBy,s.sortOrder)]:[]),A(c?[x(c)]:[]),A(i?u()(i):[]))),f),f).catch((function(e){if("OGCError"===e.name&&"NoApplicableCode"===e.code&&!s&&c&&c[0])return k(r.url||n,i&&"object"===G(i)?F(F({},i),{},{typeName:o||i.typeName}):N(R(o,[Z(a()(c)?c[0]:c)].concat(A(c?[x(c)]:[]),A(i?u()(i):[]))),f),f);throw e}))},U=function(e){var t=e.layer;return g().Observable.defer((function(){return m.Z.get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=e.describeFeatureTypeURL,l=o().parse((0,I.eW)(a||n.url||i),!0);return o().format(F(F({},l),{},{search:void 0,query:F(F({},l.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))}(t))})).let(S.oB)},B=function(e){var t=e.layer;return g().Observable.defer((function(){return m.Z.get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,i=e.url,a=(0,P.Fh)({name:t,url:n&&n.url||i}),l=o().parse(a,!0);return o().format(F(F({},l),{},{search:void 0,query:F(F({},l.query),{},{service:"WFS",version:"1.1.1",request:"GetCapabilities"})}))}(t))})).let(S.oB).switchMap((function(e){return g().Observable.bindNodeCallback((function(e,t){return(0,p.parseString)(e,{tagNameProcessors:[v.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data)}))}},472747:(e,t,r)=>{"use strict";r.d(t,{l:()=>l});var n=r(49977),o=r(375875),i=r(510284),a=r(199767),l=function(e,t){return n.Observable.defer((function(){return o.Z.get((0,a.Jy)(e,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:t}),{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}})})).let(i.oB)}},809865:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>wn});var n={};r.r(n),r.d(n,{LPlongitudinalMapLayoutGPTEpic:()=>En,checkWPSAvailabilityGPTEpic:()=>un,clickToSelectFeatureGPTEpic:()=>Sn,disableIdentifyGPTEpic:()=>Pn,getFeatureDataGPTEpic:()=>cn,getFeaturesGPTEpic:()=>sn,getIntersectionFeatureDataGPTEpic:()=>fn,removeHighlightsOnResetGPTEpic:()=>hn,resetIntersectHighlightGPTEpic:()=>gn,resetSourceHighlightGPTEpic:()=>yn,runBufferProcessGPTEpic:()=>dn,runIntersectProcessGPTEpic:()=>pn,toggleHighlightLayersGPTEpic:()=>vn,toggleHighlightLayersOnOpenCloseGPTEpic:()=>mn,unRegisterEventListenerOnReset:()=>bn});var o=r(558422),i=r.n(o),a=r(271418),l=r(805346),u=r(45697),s=r.n(u),c=r(171703),f=r(22222),d=r(965539),y=r(628665),g=r(743129),p=r(313311),v=r.n(p),m=r(441609),b=r.n(m),P="buffer",S="intersection",E="GeoProcessing",h="gpt-layer",I="gpt-layer-intersection",T="intersection_group",O="buffered_group",A="GPT:CHECK_WPS_AVAILABILITY",L="GPT:CHECKING_WPS_AVAILABILITY",G="GPT:CHECKING_WPS_AVAILABILITY_INTERSECTION",w="GPT:GET_FEATURES",C="GPT:ERROR_LOADING_DFT",F="GPT:INIT_PLUGIN",j="GPT:RUNNING_PROCESS",D="GPT:RESET",N="GPT:RUN_PROCESS",R="GPT:SET_BUFFER_DISTANCE",Z="GPT:SET_BUFFER_DISTANCE_UOM",x="GPT:SET_BUFFER_QUADRANT_SEGMENTS",_="GPT:SET_BUFFER_CAP_STYLE",M="GPT:SET_FEATURES",k="GPT:SET_FEATURE_SOURCE_LOADING",W="GPT:SET_FEATURE_INTERSECTION_LOADING",U="GPT:SET_INVALID_LAYER",B="GPT:SET_WPS_AVAILABILITY",H="GPT:SET_SELECTED_TOOL",q="GPT:SET_SOURCE_LAYER_ID",$="GPT:SET_SOURCE_FEATURE",Y="GPT:SET_SOURCE_FEATURE_ID",J="GPT:SET_INTERSECTION_LAYER_ID",V="GPT:SET_INTERSECTION_FEATURE_ID",K="GPT:SET_INTERSECTION_FEATURE",X="GPT:SET_INTERSECTION_FIRST_ATTRIBUTE",z="GPT:SET_INTERSECTION_SECOND_ATTRIBUTE",Q="GPT:SET_INTERSECTION_MODE",ee="GPT:SET_INTERSECTION_PERCENTAGES_ENABLED",te="GPT:SET_INTERSECTION_AREAS_ENABLED",re="GPT:SET_SELECTED_LAYER_TYPE",ne="GPT:TOGGLE_HIGHLIGHT_LAYERS",oe=function(e,t){return{type:A,layerId:e,source:t}},ie=function(e){return{type:L,status:e}},ae=function(e){return{type:G,status:e}},le=function(e,t){return{type:w,layerId:e,source:t,page:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}},ue=function(e){return{type:j,status:e}},se=function(e){return{type:N,process:e}},ce=function(e,t,r,n,o){return{type:M,layerId:e,source:t,data:r,nextPage:n,geometryProperty:o}},fe=function(e){return{type:k,status:e}},de=function(e){return{type:W,status:e}},ye=function(e,t){return{type:U,status:t,layerId:e}},ge=function(e,t,r){return{type:B,layerId:e,status:t,source:r}},pe=function(e){return{type:Y,featureId:e}},ve=function(e){return{type:$,feature:e}},me=function(e){return{type:V,featureId:e}},be=function(e){return{type:K,feature:e}},Pe=function(e){return{type:re,source:e}},Se=function(){return{type:ne}},Ee=r(962909),he=r(532425),Ie=r(624847),Te=r(202576),Oe=r(86638),Ae=[{id:P,optionItem:{value:P,labelMsgId:"GeoProcessing.bufferTool"},actions:{isRunDisabled:function(e){return e.runningProcess||e.isSourceLayerInvalid||!(e.sourceLayerId&&e.distance&&e.areAllWPSAvailableForSourceLayer)},runProcess:function(e){e.showHighlightLayers&&e.onToggleHighlightLayers(),b()(e.sourceFeature)?e.onShowWarning(!0):e.onRunProcess(P)},runProcessConfirm:function(e){e.onShowWarning(!1),e.onRunProcess(P)}},RunComponent:function(e){return i().createElement("div",{className:"run"},i().createElement(Ie.Z,{disabled:e.isRunDisabled(e),onClick:function(){return e.runProcess(e)}},i().createElement(l.Z,{msgId:"GeoProcessing.run"}),e.runningProcess?i().createElement(he.Z,{size:14,style:{margin:"0 auto"}}):null),i().createElement(Te.Z,{bsStyle:e.isSourceLayerInvalid?"danger":"info",text:e.isSourceLayerInvalid?(0,Oe.S$)(e.messages,"GeoProcessing.tooltip.invalidLayers"):(0,Oe.S$)(e.messages,"GeoProcessing.tooltip.fillRequiredDataBuffer")}))},ConfirmModal:function(e){return i().createElement(Ee.Z,{show:e.showWarning,onClose:e.handleCloseWarningModal,onConfirm:e.handleConfirmRunProcess,title:i().createElement(l.Z,{msgId:"GeoProcessing.warningTitle"}),fitContent:!0,confirmText:i().createElement(l.Z,{msgId:"GeoProcessing.warningConfirmText"}),cancelText:i().createElement(l.Z,{msgId:"GeoProcessing.warningCancel"})},i().createElement("div",{className:"ms-detail-body"},i().createElement(l.Z,{msgId:"GeoProcessing.warningBody"})))}},{id:S,optionItem:{value:S,labelMsgId:"GeoProcessing.intersectionTool"},actions:{isRunDisabled:function(e){return e.runningProcess||!(e.isIntersectionEnabled&&e.intersectionLayerId&&e.sourceLayerId&&e.areAllWPSAvailableForSourceLayer&&e.areAllWPSAvailableForIntersectionLayer)||e.isIntersectionLayerInvalid||e.isSourceLayerInvalid},runProcess:function(e){e.showHighlightLayers&&e.onToggleHighlightLayers(),b()(e.sourceFeature)||b()(e.intersectionFeature)?e.onShowWarning(!0):e.onRunProcess(S)},runProcessConfirm:function(e){e.onShowWarning(!1),e.onRunProcess(S)}},RunComponent:function(e){return i().createElement("div",{className:"run"},i().createElement(Ie.Z,{disabled:e.isRunDisabled(e),onClick:function(){return e.runProcess(e)}},i().createElement(l.Z,{msgId:"GeoProcessing.run"}),e.runningProcess?i().createElement(he.Z,{size:14,style:{margin:"0 auto"}}):null),i().createElement(Te.Z,{bsStyle:!e.isIntersectionEnabled||e.isIntersectionLayerInvalid||e.isSourceLayerInvalid?"danger":"info",text:e.isIntersectionEnabled?e.isIntersectionLayerInvalid||e.isSourceLayerInvalid?(0,Oe.S$)(e.messages,"GeoProcessing.tooltip.invalidLayers"):(0,Oe.S$)(e.messages,"GeoProcessing.tooltip.fillRequiredDataIntersection"):(0,Oe.S$)(e.messages,"GeoProcessing.tooltip.pointAndPolygon")}))},ConfirmModal:function(e){return i().createElement(Ee.Z,{show:e.showWarning,onClose:e.handleCloseWarningModal,onConfirm:e.handleConfirmRunProcess,title:i().createElement(l.Z,{msgId:"GeoProcessing.warningTitle"}),fitContent:!0,confirmText:i().createElement(l.Z,{msgId:"GeoProcessing.warningConfirmText"}),cancelText:i().createElement(l.Z,{msgId:"GeoProcessing.warningCancel"})},i().createElement("div",{className:"ms-detail-body"},i().createElement(l.Z,{msgId:"GeoProcessing.warningBody"})))}}],Le=r(145869),Ge=r(638445),we=r(405785),Ce=r(815135),Fe=r(227361),je=r.n(Fe),De=r(91175),Ne=r.n(De),Re=r(288306),Ze=r.n(Re),xe=r(800827),_e=r(675110),Me=r(624262),ke=r(610928),We=r.n(ke),Ue=r(189734),Be=r.n(Ue),He=r(307887);function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){Je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Je(e,t,r){return(t=function(e){var t=function(e){if("object"!=qe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ve=function(e){switch(e){case"Point":case"MultiPoint":return"point";case"LineString":case"MultiLineString":return"line";case"Polygon":case"MultiPolygon":return"polygon";default:return e}},Ke=function(e){return{type:"FeatureCollection",features:e}},Xe=function(e,t){var r=Be()(null==e?void 0:e.filter((function(e){return e.group===t})),["name"]);return r.length?Number(We()(r).name.match(/\d/)[0])+1:0},ze=function(e){var t;return null!=e&&null!==(t=e.properties)&&void 0!==t&&t.geodesic&&"LineString"===e.geometry.type?Ye(Ye({},e),{},{geometry:Ye(Ye({},e.geometry),{},{coordinates:(0,He.transformLineToArcs)(e.geometry.coordinates)})}):e},Qe=function(e){var t;if("Circle"===(null==e||null===(t=e.properties)||void 0===t?void 0:t.annotationType)){var r=e.properties.center||e.geometry.coordinates,n=(0,He.getPolygonFromCircle)(r,e.properties.radius||1,"meters");return Ye(Ye({},e),n)}return e};function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nt(e,t,r){return(t=function(e){var t=function(e){if("object"!=et(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==et(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ot=function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.buffer)||void 0===r?void 0:r.distance)||100},it=function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.buffer)||void 0===r?void 0:r.distanceUom)||"m"},at=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.buffer)||void 0===r?void 0:r.quadrantSegments},lt=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.buffer)||void 0===r?void 0:r.capStyle},ut=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.source)||void 0===r?void 0:r.layerId},st=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.source)||void 0===r?void 0:r.feature},ct=function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.source)||void 0===r?void 0:r.features)||[]},ft=function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.source)||void 0===r?void 0:r.totalCount)||0},dt=function(e){var t,r,n,o=ut(e);return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||null===(n=r.invalid)||void 0===n||!n[o])},yt=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.layerId},gt=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.feature},pt=function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.features)||[]},vt=function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.totalCount)||0},mt=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.firstAttributeToRetain},bt=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.secondAttributeToRetain},Pt=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.intersectionMode},St=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.percentagesEnabled},Et=function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.areasEnabled},ht=function(e){var t,r,n,o=yt(e);return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||null===(n=r.invalid)||void 0===n||!n[o])},It=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t?void 0:t.selectedTool},Tt=function(e){var t,r,n,o=ut(e);return o?null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||null===(n=r.wpsAvailability)||void 0===n?void 0:n[o]:null},Ot=function(e){var t,r,n,o=yt(e);return o?null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||null===(n=r.wpsAvailabilityIntersection)||void 0===n?void 0:n[o]:null},At=function(e){var t,r;return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||!r.runningProcess)},Lt=function(e){var t,r;return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||!r.showHighlightLayers)},Gt=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t?void 0:t.selectedLayerType},wt=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t?void 0:t.wpsUrl},Ct=Ze()((function(e){return(0,_e.l2)(e).filter((function(e){return"background"!==e.group})).filter((function(e){return(0,Me.jZ)(e)||"vector"===e.type})).map((function(e){var t,r;return null!=e&&null!==(t=e.features)&&void 0!==t&&t.length?rt(rt({},e),{},{features:null==e||null===(r=e.features)||void 0===r?void 0:r.map(ze).map(Qe)}):e}))}),(function(e){return JSON.stringify((0,_e.l2)(e).filter((function(e){return"background"!==e.group})).filter((function(e){return(0,Me.jZ)(e)||"vector"===e.type})))})),Ft=function(e,t){var r,n=Ne()(Ct(e).filter((function(e){return e.id===t})));return rt(rt({},n),{},{features:null==n||null===(r=n.features)||void 0===r?void 0:r.filter((function(e){var t;return!(null!=e&&null!==(t=e.properties)&&void 0!==t&&t.measureId)}))})},jt=(0,Ce.Z)(a.BZ.Addon),Dt=function(e){var t=e.areAllWPSAvailableForSourceLayer,r=e.checkingWPSAvailability,n=e.runningProcess,u=e.layers,s=e.isSourceLayerInvalid,c=e.sourceFeatureId,f=e.sourceLayerId,d=e.sourceFeatures,y=e.sourceTotalCount,p=e.sourceCurrentPage,v=e.selectedLayerType,m=e.isSourceFeaturesLoading,b=e.onGetFeatures,P=e.onCheckWPSAvailability,S=e.onSetSourceFeatureId,E=e.onSetSourceLayerId,h=e.onSetSelectedLayerType;(0,o.useEffect)((function(){f&&P(f,"source")}),[f]);var I=!f||m||r;return i().createElement(i().Fragment,null,i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(l.Z,{msgId:"GeoProcessing.sourceLayer"})),i().createElement(a.BZ,null,i().createElement(g.ZP,{disabled:n,clearable:!0,value:f,noResultsText:i().createElement(l.Z,{msgId:"GeoProcessing.noMatchedLayer"}),onChange:function(e){var t;(null==e?void 0:e.value)!==f&&E(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:"")},options:u.map((function(e){return{value:e.id,label:e.title||e.name||e.id}}))}),i().createElement(jt,{tooltipId:f?t&&!s?"GeoProcessing.tooltip.validLayer":"GeoProcessing.tooltip.invalidLayer":"GeoProcessing.tooltip.selectLayer",tooltipPosition:"left",bsStyle:"primary"},r?i().createElement(he.Z,{size:14,style:{margin:"0 auto"}}):i().createElement(a.gG,{glyph:f?t&&!s?"ok-sign":"exclamation-mark":"question-sign",className:f?t&&!s?"text-success":"text-danger":"text-info"})))),i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(l.Z,{msgId:"GeoProcessing.sourceFeature"})),i().createElement(a.BZ,{className:"infinite-select-scroll"},i().createElement(g.ZP,{disabled:r||m||n||s,clearable:!0,noResultsText:i().createElement(l.Z,{msgId:"GeoProcessing.noMatchedFeature"}),onChange:function(e){var t;(null==e?void 0:e.value)!==c&&S(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:"")},options:d.map((function(e,t){var r,n;return{value:(0,Me.C4)(e).id,label:null!=e&&null!==(r=e.properties)&&void 0!==r&&r.measureType?"".concat(null==e||null===(n=e.properties)||void 0===n?void 0:n.measureType," #").concat(t):(0,Me.C4)(e).id}})),value:c,onOpen:function(){"source"!==v&&0===d.length&&b(f,"source",0)},onMenuScrollToBottom:function(){y>d.length&&b(f,"source",p+1)}}),i().createElement(jt,{tooltipId:c?t?"GeoProcessing.tooltip.validFeature":"GeoProcessing.tooltip.invalidFeature":"GeoProcessing.tooltip.selectFeature",tooltipPosition:"left",bsStyle:"primary"},m?i().createElement(he.Z,{size:14,style:{margin:"0 auto"}}):i().createElement(a.gG,{glyph:c?s?"exclamation-mark":"ok-sign":"question-sign",className:c?s?"text-danger":"text-success":"text-info"})),i().createElement(jt,{disabled:I,onClick:function(){I||h("source"===v?"":"source")},tooltipId:"GeoProcessing.tooltip.clickToSelectFeature",tooltipPosition:"left",className:"btn",bsStyle:"source"===v?"success":"primary"},i().createElement(a.gG,{glyph:"map-marker",className:"source"===v?"":"text-info"})))))};Dt.propTypes={areAllWPSAvailableForSourceLayer:s().bool,checkingWPSAvailability:s().bool,layers:s().array,runningProcess:s().bool,sourceFeatureId:s().string,sourceFeatures:s().array,sourceTotalCount:s().number,sourceCurrentPage:s().number,isSourceFeaturesLoading:s().bool,isSourceLayerInvalid:s().bool,selectedLayerType:s().string,sourceLayerId:s().string,onCheckWPSAvailability:s().func,onSetSourceLayerId:s().func,onSetSelectedLayerType:s().func,onGetFeatures:s().func,onSetSourceFeatureId:s().func};var Nt=(0,c.connect)((0,f.P1)([Tt,At,Ct,ut,function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.source)||void 0===r?void 0:r.featureId},ct,ft,function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.source)||void 0===r?void 0:r.currentPage)||0},function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r?void 0:r.featuresSourceLoading},dt,function(e){var t,r;return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||!r.checkingWPSAvailability)},Gt],(function(e,t,r,n,o,i,a,l,u,s,c,f){return{areAllWPSAvailableForSourceLayer:e,runningProcess:t,layers:r,sourceLayerId:n,sourceFeatureId:o,sourceFeatures:i,sourceTotalCount:a,sourceCurrentPage:l,isSourceFeaturesLoading:u,isSourceLayerInvalid:s,checkingWPSAvailability:c,selectedLayerType:f}})),{onCheckWPSAvailability:oe,onSetSourceLayerId:function(e){return{type:q,layerId:e}},onGetFeatures:le,onSetSelectedLayerType:Pe,onSetSourceFeatureId:pe})(Dt);Nt.displayName="SourceLayer";const Rt=Nt;function Zt(){return Zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zt.apply(null,arguments)}function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _t(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_t(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Mt=(0,Ce.Z)(a.BZ.Addon),kt=function(e,t){var r=e.areAllWPSAvailableForSourceLayer,n=e.distance,u=e.distanceUom,s=e.quadrantSegments,c=e.capStyle,f=e.isSourceLayerInvalid,d=e.process,y=e.runningProcess,p=e.showHighlightLayers,v=e.sourceLayerId,m=e.sourceFeature,b=e.onRunProcess,P=e.onSetBufferDistance,S=e.onSetBufferDistanceUom,E=e.onSetBufferQuadrantSegments,h=e.onSetBufferCapStyle,I=e.onToggleHighlightLayers,T=t.messages,O=xt((0,o.useState)(!1),2),A=O[0],L=O[1],G=xt((0,o.useState)(!1),2),w=G[0],C=G[1];return i().createElement(i().Fragment,null,i().createElement(Rt,null),i().createElement("div",{className:"gpt-distance"},i().createElement("div",{className:"value"},i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(l.Z,{msgId:"GeoProcessing.distance"})),i().createElement(a.BZ,{className:"distance"},i().createElement(Ge.Z,{disabled:y,type:"number",value:n,onChange:function(e){P(e)}}),i().createElement(g.ZP,{clearable:!1,disabled:y,value:u,noResultsText:i().createElement(l.Z,{msgId:"GeoProcessing.noMatchedLayer"}),onChange:function(e){S((null==e?void 0:e.value)||"")},options:[{value:"m",label:i().createElement(l.Z,{msgId:"GeoProcessing.m"})},{value:"km",label:i().createElement(l.Z,{msgId:"GeoProcessing.km"})}]}))))),i().createElement(we.Z,{disabled:y,useToolbar:!0,title:i().createElement(l.Z,{msgId:"GeoProcessing.advancedSettings"}),expanded:A,onSwitch:L},i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(l.Z,{msgId:"GeoProcessing.quadrantSegments"})),i().createElement(a.BZ,null,i().createElement(Ge.Z,{disabled:y,type:"number",value:s,onChange:function(e){E(e)}}),i().createElement(Mt,null,i().createElement(Te.Z,{bsStyle:"info",placement:"left",text:(0,Oe.S$)(T,"GeoProcessing.quadrantSegmentsTooltip")})))),i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(l.Z,{msgId:"GeoProcessing.capStyle"})),i().createElement(a.BZ,null,i().createElement(g.ZP,{disabled:y,clearable:!0,value:c,noResultsText:i().createElement(l.Z,{msgId:"GeoProcessing.noMatchedStyle"}),onChange:function(e){h((null==e?void 0:e.value)||"")},options:[{value:"Round",label:i().createElement(l.Z,{msgId:"GeoProcessing.round"})},{value:"Flat",label:i().createElement(l.Z,{msgId:"GeoProcessing.flat"})},{value:"Square",label:i().createElement(l.Z,{msgId:"GeoProcessing.square"})}]}),i().createElement(Mt,null,i().createElement(Te.Z,{bsStyle:"info",placement:"left",text:(0,Oe.S$)(T,"GeoProcessing.capStyleTooltip")}))))),i().createElement(a.cw,{className:"highlight"},i().createElement(Le.Z,{disabled:y,checked:p,onClick:function(){I()}}),i().createElement(a.J$,null,i().createElement(l.Z,{msgId:"GeoProcessing.highlight"}))),i().createElement(d.RunComponent,Zt({areAllWPSAvailableForSourceLayer:r,runningProcess:y,isSourceLayerInvalid:f,sourceLayerId:v,distance:n,showHighlightLayers:p,sourceFeature:m,onRunProcess:b,onToggleHighlightLayers:I,onShowWarning:C,messages:T},d.actions)),i().createElement(d.ConfirmModal,{showWarning:w,handleCloseWarningModal:function(){C(!1)},handleConfirmRunProcess:function(){p&&I(),d.actions.runProcessConfirm({onShowWarning:C,onRunProcess:b})}}))};kt.propTypes={areAllWPSAvailableForSourceLayer:s().bool,distance:s().number,distanceUom:s().string,quadrantSegments:s().number,capStyle:s().string,isSourceLayerInvalid:s().bool,sourceLayerId:s().string,sourceFeature:s().object,process:s().object,runningProcess:s().bool,showHighlightLayers:s().bool,onSetBufferDistance:s().func,onRunProcess:s().func,onSetBufferDistanceUom:s().func,onSetBufferQuadrantSegments:s().func,onSetBufferCapStyle:s().func,onToggleHighlightLayers:s().func};var Wt=(0,c.connect)((0,f.P1)([Tt,ot,it,dt,ut,st,at,lt,At,Lt],(function(e,t,r,n,o,i,a,l,u,s){return{areAllWPSAvailableForSourceLayer:e,distance:t,distanceUom:r,isSourceLayerInvalid:n,sourceLayerId:o,sourceFeature:i,quadrantSegments:a,capStyle:l,runningProcess:u,showHighlightLayers:s}})),{onSetBufferDistance:function(e){return{type:R,distance:e}},onSetBufferDistanceUom:function(e){return{type:Z,uom:e}},onSetBufferQuadrantSegments:function(e){return{type:x,quadrantSegments:e}},onSetBufferCapStyle:function(e){return{type:_,capStyle:e}},onToggleHighlightLayers:Se,onRunProcess:se})(kt);kt.contextTypes={messages:s().object};const Ut=Wt;var Bt=(0,Ce.Z)(a.BZ.Addon),Ht=function(e){var t=e.areAllWPSAvailableForIntersectionLayer,r=e.checkingWPSAvailabilityIntersection,n=e.layers,u=e.isIntersectionLayerInvalid,s=e.intersectionLayerId,c=e.intersectionFeatureId,f=e.intersectionFeatures,d=e.isIntersectionFeaturesLoading,y=e.runningProcess,p=e.selectedLayerType,v=e.intersectionCurrentPage,m=e.intersectionTotalCount,b=e.onGetFeatures,P=e.onCheckWPSAvailability,S=e.onSetIntersectionLayerId,E=e.onSetIntersectionFeatureId,h=e.onSetSelectedLayerType;(0,o.useEffect)((function(){s&&P(s,"intersection")}),[s]);var I=!s||d||r;return i().createElement(i().Fragment,null,i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(l.Z,{msgId:"GeoProcessing.intersectionLayer"})),i().createElement(a.BZ,null,i().createElement(g.ZP,{disabled:y,clearable:!0,value:s,noResultsText:i().createElement(l.Z,{msgId:"GeoProcessing.noMatchedLayer"}),onChange:function(e){var t;(null==e?void 0:e.value)!==s&&S(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:"")},options:n.map((function(e){return{value:e.id,label:e.title||e.name||e.id}}))}),i().createElement(Bt,{tooltipId:s?t&&!u?"GeoProcessing.tooltip.validLayer":"GeoProcessing.tooltip.invalidLayer":"GeoProcessing.tooltip.selectLayer",tooltipPosition:"left",bsStyle:"primary"},r?i().createElement(he.Z,{size:14,style:{margin:"0 auto"}}):i().createElement(a.gG,{glyph:s?t&&!u?"ok-sign":"exclamation-mark":"question-sign",className:s?t&&!u?"text-success":"text-danger":"text-info"})))),i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(l.Z,{msgId:"GeoProcessing.intersectionFeature"})),i().createElement(a.BZ,null,i().createElement(g.ZP,{disabled:r||d||y||u,clearable:!0,value:c,noResultsText:i().createElement(l.Z,{msgId:"GeoProcessing.noMatchedFeature"}),onChange:function(e){var t;(null==e?void 0:e.value)!==c&&E(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:"")},options:f.map((function(e,t){var r,n;return{value:(0,Me.C4)(e).id,label:null!=e&&null!==(r=e.properties)&&void 0!==r&&r.measureType?"".concat(null==e||null===(n=e.properties)||void 0===n?void 0:n.measureType," #").concat(t):(0,Me.C4)(e).id}})),onOpen:function(){"intersection"!==p&&0===f.length&&b(s,"intersection",0)},onMenuScrollToBottom:function(){m>f.length&&b(s,"intersection",v+1)}}),i().createElement(Bt,{tooltipId:c?t?"GeoProcessing.tooltip.validFeature":"GeoProcessing.tooltip.invalidFeature":"GeoProcessing.tooltip.selectFeature",tooltipPosition:"left",bsStyle:"primary"},d?i().createElement(he.Z,{size:14,style:{margin:"0 auto"}}):i().createElement(a.gG,{glyph:c?u?"exclamation-mark":"ok-sign":"question-sign",className:c?u?"text-danger":"text-success":"text-info"})),i().createElement(Bt,{disabled:I,onClick:function(){I||h("intersection"===p?"":"intersection")},tooltipId:"GeoProcessing.tooltip.clickToSelectFeature",tooltipPosition:"left",className:"btn",bsStyle:"intersection"===p?"success":"primary"},i().createElement(a.gG,{glyph:"map-marker",className:"intersection"===p?"":"text-info"})))))};Ht.propTypes={areAllWPSAvailableForIntersectionLayer:s().bool,checkingWPSAvailabilityIntersection:s().bool,intersectionFeatureId:s().string,intersectionFeatures:s().array,intersectionTotalCount:s().number,intersectionCurrentPage:s().number,intersectionLayerId:s().string,isIntersectionFeaturesLoading:s().bool,layers:s().array,runningProcess:s().bool,isIntersectionLayerInvalid:s().bool,selectedLayerType:s().string,onCheckWPSAvailability:s().func,onSetIntersectionLayerId:s().func,onSetIntersectionFeatureId:s().func,onGetFeatures:s().func,onSetSelectedLayerType:s().func},Ht.contextTypes={messages:s().object};var qt=(0,c.connect)((0,f.P1)([Ot,Ct,function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r?void 0:r.featuresIntersectionLoading},yt,function(e){var t,r;return null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.featureId},pt,vt,function(e){var t,r;return(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.intersection)||void 0===r?void 0:r.currentPage)||0},At,function(e){var t,r;return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||!r.checkingIntersectionWPSAvailability)},ht,Gt],(function(e,t,r,n,o,i,a,l,u,s,c,f){return{areAllWPSAvailableForIntersectionLayer:e,layers:t,isIntersectionFeaturesLoading:r,intersectionLayerId:n,intersectionFeatureId:o,intersectionFeatures:i,intersectionTotalCount:a,intersectionCurrentPage:l,runningProcess:u,checkingWPSAvailabilityIntersection:s,isIntersectionLayerInvalid:c,selectedLayerType:f}})),{onCheckWPSAvailability:oe,onSetIntersectionLayerId:function(e){return{type:J,layerId:e}},onSetIntersectionFeatureId:me,onGetFeatures:le,onSetSelectedLayerType:Pe})(Ht);const $t=qt;function Yt(){return Yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yt.apply(null,arguments)}function Jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Vt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Kt=(0,Ce.Z)(a.BZ.Addon),Xt=function(e,t){var r=e.areAllWPSAvailableForIntersectionLayer,n=e.areAllWPSAvailableForSourceLayer,u=e.areasEnabled,s=e.firstAttributeToRetain,c=e.intersectionFeature,f=e.intersectionLayerId,d=e.intersectionMode,y=e.isIntersectionEnabled,p=e.isIntersectionLayerInvalid,v=e.isSourceLayerInvalid,m=e.percentagesEnabled,b=e.process,P=e.runningProcess,S=e.secondAttributeToRetain,E=e.showHighlightLayers,h=e.sourceFeature,I=e.sourceLayerId,T=e.onSetIntersectionFirstAttribute,O=e.onSetIntersectionSecondAttribute,A=e.onSetIntersectionMode,L=e.onSetIntersectionPercentagesEnabled,G=e.onSetIntersectionAreasEnabled,w=e.onToggleHighlightLayers,C=e.onRunProcess,F=t.messages,j=Jt((0,o.useState)(!1),2),D=j[0],N=j[1],R=Jt((0,o.useState)(!1),2),Z=R[0],x=R[1];return i().createElement(i().Fragment,null,i().createElement(Rt,null),i().createElement($t,null),i().createElement(we.Z,{disabled:P,useToolbar:!0,title:i().createElement(l.Z,{msgId:"GeoProcessing.advancedSettings"}),expanded:D,onSwitch:N},i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(l.Z,{msgId:"GeoProcessing.firstAttributeToRetain"})),i().createElement(a.BZ,null,i().createElement(Ge.Z,{disabled:P,type:"text",value:s,onChange:function(e){T(e)}}),i().createElement(Kt,null,i().createElement(Te.Z,{placement:"left",bsStyle:"info",text:(0,Oe.S$)(F,"GeoProcessing.firstAttributeToRetainTooltip")})))),i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(l.Z,{msgId:"GeoProcessing.secondAttributeToRetain"})),i().createElement(a.BZ,null,i().createElement(Ge.Z,{disabled:P,type:"text",value:S,onChange:function(e){O(e)}}),i().createElement(Kt,null,i().createElement(Te.Z,{placement:"left",bsStyle:"info",text:(0,Oe.S$)(F,"GeoProcessing.secondAttributeToRetainTooltip")})))),i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(l.Z,{msgId:"GeoProcessing.intersectionMode"})),i().createElement(a.BZ,null,i().createElement(g.ZP,{disabled:P,clearable:!0,value:d,noResultsText:i().createElement(l.Z,{msgId:"GeoProcessing.noMatchedMode"}),onChange:function(e){A((null==e?void 0:e.value)||"")},options:[{value:"INTERSECTION",label:i().createElement(l.Z,{msgId:"GeoProcessing.INTERSECTION"})},{value:"FIRST",label:i().createElement(l.Z,{msgId:"GeoProcessing.FIRST"})},{value:"SECOND",label:i().createElement(l.Z,{msgId:"GeoProcessing.SECOND"})}]}),i().createElement(Kt,null,i().createElement(Te.Z,{placement:"left",bsStyle:"info",text:(0,Oe.S$)(F,"GeoProcessing.intersectionModeTooltip")})))),i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(l.Z,{msgId:"GeoProcessing.percentagesEnabled"})),i().createElement(a.BZ,null,i().createElement(g.ZP,{disabled:P,clearable:!1,value:m,onChange:function(e){L((null==e?void 0:e.value)||"")},options:[{value:"true",label:i().createElement(l.Z,{msgId:"GeoProcessing.true"})},{value:"false",label:i().createElement(l.Z,{msgId:"GeoProcessing.false"})}]}),i().createElement(Kt,null,i().createElement(Te.Z,{placement:"left",bsStyle:"info",text:(0,Oe.S$)(F,"GeoProcessing.percentagesEnabledTooltip")})))),i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(l.Z,{msgId:"GeoProcessing.areasEnabled"})),i().createElement(a.BZ,null,i().createElement(g.ZP,{disabled:P,clearable:!1,value:u,onChange:function(e){G((null==e?void 0:e.value)||"")},options:[{value:"true",label:i().createElement(l.Z,{msgId:"GeoProcessing.true"})},{value:"false",label:i().createElement(l.Z,{msgId:"GeoProcessing.false"})}]}),i().createElement(Kt,null,i().createElement(Te.Z,{placement:"left",bsStyle:"info",text:(0,Oe.S$)(F,"GeoProcessing.areasEnabledTooltip")}))))),i().createElement(a.cw,{className:"highlight"},i().createElement(Le.Z,{disabled:P,checked:E,onClick:function(){w()}}),i().createElement(a.J$,null,i().createElement(l.Z,{msgId:"GeoProcessing.highlight"}))),i().createElement(b.RunComponent,Yt({areAllWPSAvailableForIntersectionLayer:r,areAllWPSAvailableForSourceLayer:n,intersectionFeature:c,intersectionLayerId:f,isIntersectionLayerInvalid:p,isSourceLayerInvalid:v,onRunProcess:C,onToggleHighlightLayers:w,onShowWarning:x,runningProcess:P,showHighlightLayers:E,sourceFeature:h,sourceLayerId:I,messages:F,isIntersectionEnabled:y},b.actions)),i().createElement(b.ConfirmModal,{showWarning:Z,handleCloseWarningModal:function(){x(!1)},handleConfirmRunProcess:function(){E&&w(),b.actions.runProcessConfirm({onShowWarning:x,onRunProcess:C})}}))};Xt.propTypes={areasEnabled:s().string,firstAttributeToRetain:s().string,intersectionMode:s().string,isIntersectionLayerInvalid:s().bool,isSourceLayerInvalid:s().bool,isIntersectionEnabled:s().bool,percentagesEnabled:s().string,runningProcess:s().bool,process:s().object,sourceLayerId:s().string,intersectionLayerId:s().string,secondAttributeToRetain:s().string,showHighlightLayers:s().bool,areAllWPSAvailableForSourceLayer:s().bool,areAllWPSAvailableForIntersectionLayer:s().bool,sourceFeature:s().object,intersectionFeature:s().object,onSetIntersectionFirstAttribute:s().func,onSetIntersectionSecondAttribute:s().func,onSetIntersectionMode:s().func,onSetIntersectionPercentagesEnabled:s().func,onSetIntersectionAreasEnabled:s().func,onToggleHighlightLayers:s().func,onRunProcess:s().func},Xt.contextTypes={messages:s().object};var zt=(0,c.connect)((0,f.P1)([Tt,Ot,At,mt,bt,Pt,function(e){var t,r;return!(null==e||null===(t=e.geoProcessing)||void 0===t||null===(r=t.flags)||void 0===r||!r.isIntersectionEnabled)},ut,yt,ht,dt,St,Et,Lt,st,gt],(function(e,t,r,n,o,i,a,l,u,s,c,f,d,y,g,p){return{areAllWPSAvailableForSourceLayer:e,areAllWPSAvailableForIntersectionLayer:t,runningProcess:r,firstAttributeToRetain:n,secondAttributeToRetain:o,intersectionMode:i,isIntersectionEnabled:a,sourceLayerId:l,intersectionLayerId:u,isIntersectionLayerInvalid:s,isSourceLayerInvalid:c,percentagesEnabled:f,areasEnabled:d,showHighlightLayers:y,sourceFeature:g,intersectionFeature:p}})),{onSetIntersectionFirstAttribute:function(e){return{type:X,firstAttributeToRetain:e}},onSetIntersectionSecondAttribute:function(e){return{type:z,secondAttributeToRetain:e}},onSetIntersectionMode:function(e){return{type:Q,intersectionMode:e}},onSetIntersectionPercentagesEnabled:function(e){return{type:ee,percentagesEnabled:e}},onSetIntersectionAreasEnabled:function(e){return{type:te,areasEnabled:e}},onToggleHighlightLayers:Se,onRunProcess:se})(Xt);Xt.contextTypes={messages:s().object};const Qt=zt;var er=function(e,t){var r=e.runningProcess,n=e.selectedTool,o=e.onReset,u=e.onSetSelectedTool,s=t.messages,c=function(e){return v()(Ae,(function(t){return t.id===e}))};return i().createElement(i().Fragment,null,i().createElement("div",{className:"map-templates-all"},i().createElement(a.l0,null,i().createElement(a.cw,null,i().createElement(a.J$,null,i().createElement(l.Z,{msgId:"GeoProcessing.tool"}))),i().createElement(a.cw,null,i().createElement(g.ZP,{disabled:r,clearable:!1,value:n,onChange:function(e){u((null==e?void 0:e.value)||""),(null==e?void 0:e.value)!==n&&o()},options:Ae.map((function(e){var t=e.optionItem;return{value:t.value,label:(0,Oe.S$)(s,t.labelMsgId)}}))})),n===P?i().createElement(Ut,{process:c(P)}):null,n===S?i().createElement(Qt,{process:c(S)}):null)))};er.propTypes={selectedTool:s().string,runningProcess:s().bool,onReset:s().func,onSetSelectedTool:s().func},er.contextTypes={messages:s().object};var tr=(0,c.connect)((0,f.P1)([It,At],(function(e,t){return{selectedTool:e,runningProcess:t}})),{onReset:function(){return{type:D}},onSetSelectedTool:function(e){return{type:H,tool:e}}})(er);const rr=tr;var nr=r(782904),or=r(607147),ir=r(55105),ar=function(e){var t=e.dockStyle,r=e.enabled,n=e.pluginCfg,a=e.onClose,u=e.onMount;return(0,o.useEffect)((function(){u(n)}),[]),r?i().createElement(y.Z,{containerStyle:t,containerClassName:"dock-container",containerId:"GeoProcessing-root",open:r,size:550,dock:!0,position:"right",bsStyle:"primary",title:i().createElement(l.Z,{msgId:"GeoProcessing.title"}),onClose:a,glyph:"globe-settings",style:t},i().createElement(d.Z,{key:"gpt-BorderLayout",className:"geo-processing-tool-panel"},i().createElement(rr,null))):null};ar.propTypes={enabled:s().bool,dockStyle:s().object,pluginCfg:s().object,onClose:s().func,onMount:s().func};const lr=(0,c.connect)((0,f.P1)([or.dK,ir.Fc],(function(e,t){return{enabled:e,dockStyle:t}})),{onMount:function(e){return{type:F,cfg:e}},onClose:nr.Xi.bind(null,"GeoProcessing",null)})(ar);var ur=r(984596),sr=r.n(ur),cr=r(630998),fr=r.n(cr),dr=r(414293),yr=r.n(dr),gr=r(49977),pr=r.n(gr),vr=r(423570),mr=r.n(vr),br=r(505055),Pr=r(507526),Sr=r(362520),Er=r(739034),hr=r(701449);var Ir=r(460604),Tr=r(604206),Or=r(591884),Ar=r(580416),Lr=r(801550),Gr=r(921914),wr=r(197395),Cr=r(886850),Fr=r(199767),jr=r(27835);function Dr(e){return function(e){if(Array.isArray(e))return Nr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Nr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Rr=r(439156),Zr=r.n(Rr)()({wfsVersion:"1.1.0"}),xr=Zr.getFeature,_r=Zr.query;const Mr=function(e){var t=e.name,r=e.featureCollection,n=(0,Fr.fA)("test/xml","http://geoserver/wfs","POST",xr(_r(t)));return r&&(n=(0,Fr.XA)((0,Fr.p5)((0,Fr.Rr)(JSON.stringify(r)),"application/json"))),(0,jr.Uh)("gs:CollectGeometries",[(0,Fr.qP)("features",n)],(0,Fr.DK)((0,Fr.En)("result","application/json")))};var kr=r(472747);function Wr(e){return function(e){if(Array.isArray(e))return Ur(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ur(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ur(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Br=r(569893),Hr=r(307877),qr=r(667348),$r=r(598223),Yr=r(249243),Jr=r(432420),Vr=r(378889),Kr=r(663240);function Xr(e){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xr(e)}function zr(e){return function(e){if(Array.isArray(e))return en(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qr(e,t){if(e){if("string"==typeof e)return en(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?en(e,t):void 0}}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tn(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(r),!0).forEach((function(t){on(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function on(e,t,r){return(t=function(e){var t=function(e){if("object"!=Xr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var an=[(0,Tr.Yf)("stop"),(0,Tr.Yf)("clean","",E)],ln=[{filter:["==","geomType","polygon"],symbolizers:[{kind:"Fill",outlineWidth:3,outlineColor:"#ffac12",outlineOpacity:1,color:"#ffffff",fillOpacity:.3}]},{filter:["==","geomType","line"],symbolizers:[{kind:"Line",width:3,color:"#ffac12",opacity:.3}]},{filter:["==","geomType","point"],symbolizers:[{kind:"Mark",wellKnownName:"Circle",color:"#ffffff",fillOpacity:.3,strokeColor:"#ffac12",strokeOpacity:1,strokeWidth:3,radius:8}]}],un=function(e,t){return e.ofType(A).mergeMap((function(r){var n,o,i,a=r.layerId,l=r.source,u=t.getState(),s=Ft(u,a),c=wt(u)||Ne()(sr()(s.url)),f="source"===l?ie:ae;return"vector"===s.type?pr().Observable.from([ge(a,!0,l),ce(a,l,s,0,(null==s||null===(n=s.features)||void 0===n||null===(o=n[0])||void 0===o||null===(i=o.geometry)||void 0===i?void 0:i.type)||""),f(!1)]):(0,kr.l)(c,"geo:buffer,gs:IntersectionFeatureCollection,gs:CollectGeometries").mergeMap((function(e){return pr().Observable.defer((function(){return new Promise((function(t,r){return(0,br.parseString)(e.data,{tagNameProcessors:[Pr.stripPrefix]},(function(e,n){return e?r(e):t(n)}))}))}))})).flatMap((function(t){var r,n,o,i,u,d,y,g,p,v,m,b,P=[null==t||null===(r=t.ProcessDescriptions)||void 0===r||null===(n=r.ProcessDescription)||void 0===n||null===(o=n[0])||void 0===o||null===(i=o.Identifier)||void 0===i?void 0:i[0],null==t||null===(u=t.ProcessDescriptions)||void 0===u||null===(d=u.ProcessDescription)||void 0===d||null===(y=d[1])||void 0===y||null===(g=y.Identifier)||void 0===g?void 0:g[0],null==t||null===(p=t.ProcessDescriptions)||void 0===p||null===(v=p.ProcessDescription)||void 0===v||null===(m=v[2])||void 0===m||null===(b=m.Identifier)||void 0===b?void 0:b[0]];return["geo:buffer","gs:IntersectionFeatureCollection","gs:CollectGeometries"].reduce((function(e,t){return e&&fr()(P,(function(e){return e===t}))>-1}),!0)?s.describeFeatureType?pr().Observable.from([ge(a,!0,l),le(a,l,0),f(!1)]):pr().Observable.from([ge(a,!0,l),(0,Or.H)(c,s,{},l),f(!1)]).merge(pr().Observable.race(e.ofType(Ar.K$).filter((function(e){return e.node===a})),pr().Observable.timer(1e4).mapTo("timeout")).switchMap((function(e){return"timeout"===e||null!=e&&e.error?pr().Observable.of(ye(a,l)):pr().Observable.of(le(a,l,0))}))):pr().Observable.from([ye(a,l),ge(a,!1,l),f(!1)])})).catch((function(e){return(0,$r.H)(e),pr().Observable.of(ge(a,!1,l),f(!1))})).startWith(f(!0))}))},sn=function(e,t){return e.ofType(w).filter((function(e){var r,n,o=e.source,i=t.getState();return"source"===o?(n=ft(i),r=ct(i)):(r=pt(i),n=vt(i)),0===n||n>r.length})).mergeMap((function(e){var r,n,o,i,a=e.layerId,l=e.source,u=e.page,s=t.getState(),c="source"===l?fe:de,f=Ft(s,a);if("vector"===f.type)return pr().Observable.from([ce(a,l,f,0,(null==f||null===(n=f.features)||void 0===n||null===(o=n[0])||void 0===o||null===(i=o.geometry)||void 0===i?void 0:i.type)||"")]);var d=function(e){var t;return(null==e||null===(t=e.geoProcessing)||void 0===t?void 0:t.maxFeatures)||10}(s);if(yr()(null==f?void 0:f.describeFeatureType))return pr().Observable.of(function(e){return{type:C,layerId:e}}(a));var y={propertyName:(0,Vr.findNonGeometryProperty)(f.describeFeatureType)[0].name,startIndex:u*d,maxFeatures:d},g=(0,Vr.findGeometryProperty)(f.describeFeatureType);return pr().Observable.merge((0,Cr.Mc)(nn(nn({},f),{},{name:null==f?void 0:f.name,search:nn(nn({},null!==(r=null==f?void 0:f.search)&&void 0!==r?r:{}),{},{url:f.url})}),null,y).map((function(e){return ce(a,l,e,u,g)})).catch((function(e){return(0,$r.H)(e),pr().Observable.of(ce(a,l,e,u,g),(0,wr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGettingFeaturesList",autoDismiss:6,position:"tc",values:{layerName:f.name+" - "+f.title}}))})).startWith(c(!0)).concat(pr().Observable.of(c(!1))))}))},cn=function(e,t){return e.ofType(Y).filter((function(e){return e.featureId&&""!==e.featureId})).switchMap((function(e){var r=e.featureId,n=t.getState(),o=ut(n),i=(0,Hr.kn)(n),a=Lt(n),l=Ft(n,o);return pr().Observable.defer((function(){return"vector"===l.type?pr().Observable.of(l):(0,Jr.DH)(l.search.url,{typeName:l.name,featureID:r,outputFormat:"application/json",srsName:"EPSG:4326"})})).switchMap((function(e){var t=e.features,n=v()(t,(function(e){return e.id===r})),o=a?[(0,Lr.Px)((0,He.getGeoJSONExtent)(n.geometry),"EPSG:4326")]:[];return pr().Observable.from([ve(n),(0,Ir.W)(h,"gpt","overlay",{type:"vector",name:"highlight-gpt-features",visibility:a,features:t.filter((function(e){return e.id===r})).map((0,Hr.X8)(i))})].concat(o))})).catch((function(e){return(0,$r.H)(e),pr().Observable.of((0,wr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGetFeature",autoDismiss:6,position:"tc"}))}))}))},fn=function(e,t){return e.ofType(V).filter((function(e){return""!==e.featureId})).switchMap((function(e){var r=e.featureId,n=t.getState(),o=yt(n),i=(0,Hr.kn)(n),a=Lt(n),l=Ft(n,o);return pr().Observable.defer((function(){return"vector"===l.type?pr().Observable.of(l):(0,Jr.DH)(l.search.url,{typeName:l.name,featureID:r,outputFormat:"application/json",srsName:"EPSG:4326"})})).switchMap((function(e){var t=e.features,n=v()(t,(function(e){return e.id===r})),o=a?[(0,Lr.Px)((0,He.getGeoJSONExtent)(n.geometry),"EPSG:4326")]:[];return pr().Observable.from([be(n),(0,Ir.W)(I,"gpt","overlay",{type:"vector",name:"highlight-gpt-intersection-features",visibility:a,features:t.filter((function(e){return e.id===r})).map((0,Hr.X8)(i))})].concat(o))})).catch((function(e){return(0,$r.H)(e),pr().Observable.of((0,wr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGetFeature",autoDismiss:6,position:"tc"}))}))}))},dn=function(e,t){return e.ofType(N).filter((function(e){return e.process===P})).switchMap((function(e){tn(e);var r=t.getState(),n=ut(r),o=Ft(r,n),i=Ct(r),a=wt(r)||Ne()(sr()(o.url)),l=at(r),u=lt(r),s={},c=ot(r);"km"===it(r)&&(c*=1e3);var f=Xe(i,O),d=[];if(a||d.push(o.name===o.title?o.name:o.name+" - "+o.title),d.length)return pr().Observable.of((0,wr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorMissingUrl",autoDismiss:6,position:"tc",values:{layerName:d.join(", ")}}));var y=function(e,t){return pr().Observable.defer((function(){return function(e,t){var r=function(e,t){void 0===t&&(t={});var r=0,n=0,o=0;return(0,Er.pZ)(e,(function(e){r+=e[0],n+=e[1],o++}),!0),(0,hr.xm)([r/o,n/o],t.properties)}(t),n=(0,He.reprojectGeoJson)(r,"EPSG:4326","EPSG:3857"),o=(0,He.reprojectGeoJson)({type:"Feature",geometry:nn(nn({},n.geometry),{},{coordinates:[n.geometry.coordinates[0]-1e3,n.geometry.coordinates[1]]})},"EPSG:3857","EPSG:4326"),i=(0,He.calculateDistance)([r.geometry.coordinates,o.geometry.coordinates]);return c*=1e3/i,(0,jr.ZP)(a,function(e){var t=e.geometry3857,r=e.distance,n=void 0===r?100:r,o=e.quadrantSegments,i=e.capStyle,a=[(0,Fr.qP)("geom",(0,Fr.XA)((0,Fr.p5)((0,Fr.Rr)(t),"application/wkt"))),(0,Fr.qP)("distance",(0,Fr.XA)((0,Fr.gN)(n)))].concat(Dr(o?[(0,Fr.qP)("quadrantSegments",(0,Fr.XA)((0,Fr.gN)(o)))]:[]),Dr(i?[(0,Fr.qP)("capStyle",(0,Fr.XA)((0,Fr.gN)(i)))]:[]));return(0,jr.Uh)("geo:buffer",a,(0,Fr.DK)((0,Fr.En)("result","application/json")))}({geometry3857:e,distance:c,quadrantSegments:l,capStyle:u}),s,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/json"}})}(e,t).switchMap((function(e){var t=(0,_e.Bt)(r),n=v()(t,(function(e){return"Default"===e.id})),o=v()((null==n?void 0:n.nodes)||[],(function(e){return e.id===O}))||v()(t,(function(e){return e.id===O})),i=[(0,He.reprojectGeoJson)({id:0,geometry:e,type:"Feature"},"EPSG:3857","EPSG:4326")],a=(0,He.getGeoJSONExtent)({features:i,type:"FeatureCollection"});return(o?pr().Observable.empty():pr().Observable.of((0,Ar.Rp)("Buffered layers",null,{id:O},!0))).concat(pr().Observable.of((0,Ar.A4)({id:mr()(),type:"vector",name:"Buffer Layer "+f,title:"Buffer Layer "+f,visibility:!0,group:O,bbox:{crs:"EPSG:4326",bounds:{minx:a[0],miny:a[1],maxx:a[2],maxy:a[3]}},features:i.map((function(e){return nn(nn({},e),{},{properties:nn(nn({},e.properties),{},{geomType:Ve(e.geometry.type)})})})),style:{format:"geostyler",body:{name:"",rules:ln}}}),(0,Lr.Px)(a,"EPSG:4326"),(0,wr.Vp)({title:"notification.success",message:"GeoProcessing.notifications.successfulBuffer",autoDismiss:6,position:"tc"})))})).catch((function(e){return(0,$r.H)(e),pr().Observable.of((0,wr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorBuffer",autoDismiss:6,position:"tc"}))}))}))},g=st(r);if(b()(g))return(0,jr.ZP)(a,Mr({name:o.name,featureCollection:"vector"===o.type?Ke(o.features):null}),s,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/json"}}).catch((function(e){return(0,$r.H)(e),pr().Observable.of({error:e,layerName:o.name,layerTitle:o.title})})).switchMap((function(e){if(e.error)return e.error.message.includes("Failed to retrieve value for input features")?(console.error("layerName "+e.layerName+" - "+e.layerTitle),pr().Observable.of((0,wr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGettingFC",autoDismiss:6,position:"tc",values:{layerName:e.layerName+" - "+e.layerTitle}}))):pr().Observable.of((0,wr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorBuffer",autoDismiss:6,position:"tc"}));var t={type:"Feature",geometry:e},r=(0,He.reprojectGeoJson)(t,"EPSG:4326","EPSG:3857"),n=(0,Kr.Z)(r.geometry);return y(n,t)})).startWith(ue(!0)).concat(pr().Observable.of(ue(!1)));var p=(0,He.reprojectGeoJson)(g,"EPSG:4326","EPSG:3857"),m=(0,Kr.Z)(p.geometry);return y(m,g).startWith(ue(!0)).concat(pr().Observable.of(ue(!1)))}))},yn=function(e){return e.ofType(q,Y).filter((function(e){return e.type===q||""===e.featureId})).switchMap((function(e){return tn(e),pr().Observable.of((0,Ir.fU)({id:h}))}))},gn=function(e){return e.ofType(J,V).filter((function(e){return e.type===J||""===e.featureId})).switchMap((function(e){return tn(e),pr().Observable.of((0,Ir.fU)({id:I}))}))},pn=function(e,t){return e.ofType(N).filter((function(e){return e.process===S})).switchMap((function(e){tn(e);var r,n,o=t.getState(),i=ut(o),a=Ft(o,i),l=Ct(o),u=wt(o)||Ne()(sr()(a.url)),s=yt(o),c=Ft(o,s),f=wt(o)||Ne()(sr()(c.url)),d=st(o),y={},g=gt(o),p=Xe(l,T),m=[];return u||m.push(a.name===a.title?a.name:a.name+" - "+a.title),f||m.push(c.name===c.title?c.name:c.name+" - "+c.title),m.length?pr().Observable.of((0,wr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorMissingUrl",autoDismiss:6,position:"tc",values:{layerName:m.join(", ")}})):(r=b()(d)?(0,jr.ZP)(u,Mr({name:a.name,featureCollection:"vector"===a.type?Ke(a.features):null}),y,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/json"}}).catch((function(e){return(0,$r.H)(e),pr().Observable.of({error:e,layerName:a.name,layerTitle:a.title})})):pr().Observable.of(d.geometry),n=b()(g)?(0,jr.ZP)(f,Mr({name:c.name,featureCollection:"vector"===c.type?Ke(c.features):null}),y,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/json"}}).catch((function(e){return(0,$r.H)(e),pr().Observable.of({error:e,layerName:c.name,layerTitle:c.title})})):pr().Observable.of(g.geometry),pr().Observable.forkJoin(r,n).switchMap((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,r)||Qr(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],l=n[1];if(null!=i&&i.error||null!=l&&l.error){var s,d,g,b,P=[];return null!=i&&null!==(s=i.error)&&void 0!==s&&null!==(d=s.message)&&void 0!==d&&d.includes("Failed to retrieve value for input features")&&((0,$r.H)(i.error),P.push((0,wr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGettingFC",autoDismiss:6,position:"tc",values:{layerName:i.layerName+" - "+i.layerTitle}}))),null!=l&&null!==(g=l.error)&&void 0!==g&&null!==(b=g.message)&&void 0!==b&&b.includes("Failed to retrieve value for input features")&&((0,$r.H)(l.error),P.push((0,wr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGettingFC",autoDismiss:6,position:"tc",values:{layerName:l.layerName+" - "+l.layerTitle}}))),P.push((0,wr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorIntersectGFI",autoDismiss:6,position:"tc"})),pr().Observable.from(P)}var S=mt(o),E=bt(o),h=Pt(o),I=St(o),O=Et(o);return(0,jr.ZP)(u||f,function(e){var t=e.firstFC,r=e.secondFC,n=e.firstAttributeToRetain,o=void 0===n?"":n,i=e.secondAttributeToRetain,a=void 0===i?"":i,l=e.intersectionMode,u=void 0===l?"INTERSECTION":l,s=e.percentagesEnabled,c=void 0!==s&&s,f=e.areasEnabled,d=void 0!==f&&f;return(0,jr.Uh)("gs:IntersectionFeatureCollection",[(0,Fr.qP)("first feature collection",(0,Fr.XA)((0,Fr.p5)((0,Fr.Rr)(JSON.stringify(t)),"application/json"))),(0,Fr.qP)("second feature collection",(0,Fr.XA)((0,Fr.p5)((0,Fr.Rr)(JSON.stringify(r)),"application/json")))].concat(Wr(o?[(0,Fr.qP)("first attributes to retain",(0,Fr.XA)((0,Fr.gN)(o)))]:[]),Wr(a?[(0,Fr.qP)("second attributes to retain",(0,Fr.XA)((0,Fr.gN)(a)))]:[]),Wr(u?[(0,Fr.qP)("intersectionMode",(0,Fr.XA)((0,Fr.gN)(u)))]:[]),[(0,Fr.qP)("percentagesEnabled",(0,Fr.XA)((0,Fr.gN)(c))),(0,Fr.qP)("areasEnabled",(0,Fr.XA)((0,Fr.gN)(d)))]),(0,Fr.DK)((0,Fr.En)("result","application/json")))}({firstFC:{type:"FeatureCollection",features:[{type:"Feature",geometry:i}]},secondFC:{type:"FeatureCollection",features:[{type:"Feature",geometry:l}]},firstAttributeToRetain:S,secondAttributeToRetain:E,intersectionMode:h,percentagesEnabled:I,areasEnabled:O}),y,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/json"}}).switchMap((function(e){var t=(0,_e.Bt)(o);if("string"==typeof e){var r=e.substring(e.indexOf("<ows:ExceptionText>")+19,e.indexOf("</ows:ExceptionText>"));return console.error(e),pr().Observable.of((0,wr.vU)({title:"errorTitleDefault",message:r,autoDismiss:6,position:"tc"}))}var n=v()(t,(function(e){return"Default"===e.id})),i=v()((null==n?void 0:n.nodes)||[],(function(e){return e.id===T}))||v()(t,(function(e){return e.id===T})),a=(0,He.getGeoJSONExtent)(e);return a.some((function(e){return e===1/0}))?pr().Observable.of((0,wr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.emptyIntersection",autoDismiss:6,position:"tc"})):(i?pr().Observable.empty():pr().Observable.of((0,Ar.Rp)("Intersected Layers",null,{id:T},!0))).concat(pr().Observable.of((0,Ar.A4)({id:mr()(),type:"vector",name:"Intersection Layer "+p,group:T,title:"Intersection Layer "+p,visibility:!0,features:e.features.map((function(e,t){return nn(nn({},e),{},{id:"Feature #"+t,properties:nn(nn({},e.properties),{},{geomType:Ve(e.geometry.type)})})})),bbox:{crs:"EPSG:4326",bounds:{minx:a[0],miny:a[1],maxx:a[2],maxy:a[3]}},style:{format:"geostyler",body:{name:"",rules:ln}}}),(0,Lr.Px)(a,"EPSG:4326"),(0,wr.Vp)({title:"notification.success",message:"GeoProcessing.notifications.successfulIntersection",autoDismiss:6,position:"tc"})))})).catch((function(e){return(0,$r.H)(e),m=[],u||m.push(a.name+" - "+a.title),f||m.push(c.name+" - "+c.title),m.length?pr().Observable.of((0,wr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorMissingUrl",autoDismiss:6,position:"tc",values:{layerName:m.join(", ")}})):pr().Observable.of((0,wr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorIntersectGFI",autoDismiss:6,position:"tc"}))}))})).startWith(ue(!0)).concat(pr().Observable.of(ue(!1))))}))},vn=function(e,t){return e.ofType(ne).switchMap((function(){var e=Lt(t.getState());return pr().Observable.of((0,Ir.YP)("gpt",{visibility:e}))}))},mn=function(e,t){return e.ofType(nr.kM).filter((function(e){return e.control===E})).switchMap((function(){var e,r=t.getState(),n=Lt(r),o=(0,or.dK)(r);if(It(r)===P){var i,a,l=(0,Br.K)(r),u=v()(l,(function(e){return e.id===h}));return null!=u&&u.id?(i=pr().Observable).of.apply(i,[(0,Ir.W)(u.id,u.owner,u.actionType,nn(nn({},u.options),{},{visibility:!!o&&n})),(0,Lr.$X)("click",E)].concat(zr(o?[]:[(0,Gr.mK)(!0),Pe("")]))):(a=pr().Observable).of.apply(a,[(0,Lr.$X)("click",E)].concat(zr(o?[]:[(0,Gr.mK)(!0),Pe("")])))}return pr().Observable.of((0,Ir.YP)("gpt",{visibility:!!o&&n})).concat((e=pr().Observable).of.apply(e,[(0,Lr.$X)("click",E)].concat(zr(o?[]:[(0,Gr.mK)(!0),Pe("")]))))}))},bn=function(e){return e.ofType(D).switchMap((function(){return pr().Observable.of((0,Lr.$X)("click",E))}))},Pn=function(e,t){var r=t.getState;return e.ofType(re).filter((function(e){return!!e.source})).switchMap((function(e){var t=e.source,n=r();return pr().Observable.from([(0,Gr.g)(),(0,Gr.aN)()].concat(zr(je()(n,"draw.drawOwner","")===E?an:[]),[(0,Lr.H0)("click",E)],zr((0,Hr.yg)(n)?[(0,Gr.mK)(!1)]:[(0,Gr.mK)(!t)])))}))},Sn=function(e,t){var r=t.getState;return e.ofType(Lr.TR).filter((function(){return e=r(),!!je()((0,xe.Od)(e),"eventListeners.click",[]).find((function(e){return e===E}));var e})).switchMap((function(e){var t,n=e.point,o=r(),i=(0,xe.Od)(o),a=function(e){var t;return null==e||null===(t=e.geoProcessing)||void 0===t?void 0:t.selectedLayerId}(o),l=Gt(o),u="source"===l?ve:be,s="source"===l?pe:me,c=Ft(o,a),f=(0,qr.Fm)(c,{format:"application/json",map:i,point:n}),d=f.url,y=f.request,g=d,p=nn({},y);if(d)return("client"!==d?(0,Yr.y)(g,p,c,{attachJSON:!0}):pr().Observable.defer((function(){var e,t,r,n,o,i,a;return pr().Observable.of(null!=y&&null!==(e=y.features)&&void 0!==e&&null!==(t=e[0])&&void 0!==t&&null!==(r=t.properties)&&void 0!==r&&null!==(n=r.features)&&void 0!==n&&n.length?null==y||null===(o=y.features)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.properties:null!=y&&null!==(a=y.features)&&void 0!==a&&a.length?y:{features:[]})}))).switchMap((function(e){var t=e.features;return null!=t&&t.length?pr().Observable.from([u(t[0]),s(t[0].id),(0,wr.Vp)({title:"notification.success",message:"GeoProcessing.notifications.featureFound",autoDismiss:10,position:"tc"})]):pr().Observable.of((0,wr.Kp)({title:"notification.warning",message:"GeoProcessing.notifications.noFeatureInPoint",autoDismiss:10,position:"tc"}))})).catch((function(e){return(0,$r.H)(e),pr().Observable.of((0,wr.vU)({title:"errorTitleDefault",message:"GeoProcessing.notifications.errorGFI",autoDismiss:6,position:"tc"}))}));var v=(null!==(t=null==n?void 0:n.intersectedFeatures)&&void 0!==t?t:[]).find((function(e){return e.id===c.id})),m=null==v?void 0:v.features[0];return m?pr().Observable.of(u(m),s(m.id)):pr().Observable.of((0,wr.Kp)({title:"notification.warning",message:"longitudinalProfile.warnings.noFeatureInPoint",autoDismiss:10,position:"tc"}))}))},En=function(e,t){return e.ofType(Sr.dn).filter((function(e){var r=e.source;return(0,or.dK)(t.getState())&&r!==E})).map((function(e){var t,r,n,o,i=e.layout,a=(0,Sr.FV)(nn(nn({},i),{},{right:550+(null!==(t=null==i||null===(r=i.boundingSidebarRect)||void 0===r?void 0:r.right)&&void 0!==t?t:0),boundingMapRect:nn(nn({},i.boundingMapRect||{}),{},{right:550+(null!==(n=null==i||null===(o=i.boundingSidebarRect)||void 0===o?void 0:o.right)&&void 0!==n?n:0)}),rightPanel:!0}));return nn(nn({},a),{},{source:E})}))},hn=function(e){return e.ofType(D).switchMap((function(){return pr().Observable.of((0,Ir.fU)({id:h}),(0,Ir.fU)({id:I}))}))},In=r(275982);function Tn(e){return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn(e)}function On(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function An(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?On(Object(r),!0).forEach((function(t){Ln(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):On(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ln(e,t,r){return(t=function(e){var t=function(e){if("object"!=Tn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Tn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Tn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Gn={source:{},buffer:{},selectedLayerId:"",selectedLayerType:"",intersection:{intersectionMode:"INTERSECTION"},flags:{showHighlightLayers:!0,isIntersectionEnabled:!0,runningProcess:!1}};const wn=(0,r(322843).rx)("GeoProcessing",{component:lr,containers:{SidebarMenu:{name:"GeoProcessing",position:2100,doNotHide:!0,tooltip:"GeoProcessing.tooltip.siderBarBtn",text:i().createElement(l.Z,{msgId:"GeoProcessing.title"}),icon:i().createElement(a.gG,{glyph:"globe-settings"}),action:nr.Xi.bind(null,"GeoProcessing",null),priority:10,toggle:!0},BurgerMenu:{name:"GeoProcessing",position:2100,doNotHide:!0,tooltip:"GeoProcessing.tooltip.siderBarBtn",text:i().createElement(l.Z,{msgId:"GeoProcessing.title"}),icon:i().createElement(a.gG,{glyph:"globe-settings"}),action:nr.Xi.bind(null,"GeoProcessing",null),priority:12,toggle:!0}},reducers:{geoProcessing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An({selectedTool:P||S},Gn),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return An(An({},e),{},{flags:An(An({},e.flags),{},{checkingWPSAvailability:t.status})});case G:return An(An({},e),{},{flags:An(An({},e.flags),{},{checkingWPSAvailabilityIntersection:t.status})});case C:return An(An({},e),{},{errorLoadingDFT:Ln({},t.layerId,!0)});case F:return An(An(An({},e),t.cfg),{},{cfg:t.cfg,buffer:An(An({},e.buffer),t.cfg.buffer||{}),intersection:An(An({},e.intersection),t.cfg.intersection||{})});case D:case nr.l:case In.nk:return An(An(An({},e),Gn),{},{buffer:An(An({},e.cfg.buffer||{}),Gn.buffer),intersection:An(An({},e.cfg.intersection||{}),Gn.intersection),source:An({},Gn.source)});case j:return An(An({},e),{},{flags:An(An({},e.flags),{},{runningProcess:t.status})});case R:return An(An({},e),{},{buffer:An(An({},e.buffer),{},{distance:Number(t.distance)})});case Z:return An(An({},e),{},{buffer:An(An({},e.buffer),{},{distanceUom:t.uom})});case x:return An(An({},e),{},{buffer:An(An({},e.buffer),{},{quadrantSegments:Number(t.quadrantSegments)})});case _:return An(An({},e),{},{buffer:An(An({},e.buffer),{},{capStyle:t.capStyle})});case M:var r,n;return t.data.features?An(An({},e),{},Ln(Ln({},t.source,An(An({},e[t.source]),{},{features:(e[t.source].features||[]).concat(t.data.features||[]).filter((function(e){var t;return!(null!=e&&null!==(t=e.properties)&&void 0!==t&&t.measureId)})),totalCount:t.data.totalFeatures,currentPage:t.nextPage})),"flags",An(An({},e.flags),{},{isIntersectionEnabled:"source"===t.source?!(null!==(r=t.geometryProperty)&&void 0!==r&&null!==(n=r.type)&&void 0!==n&&n.includes("Point")):e.flags.isIntersectionEnabled}))):An(An({},e),{},Ln({},t.source,An(An({},e[t.source]),{},{error:t.data})));case k:return An(An({},e),{},{flags:An(An({},e.flags),{},{featuresSourceLoading:t.status})});case W:return An(An({},e),{},{flags:An(An({},e.flags),{},{featuresIntersectionLoading:t.status})});case U:return An(An({},e),{},{flags:An(An({},e.flags),{},{invalid:An(An({},e.flags.invalid),{},Ln({},t.layerId,t.status))})});case B:return An(An({},e),{},{flags:An(An({},e.flags),"source"===t.source?{wpsAvailability:An(An({},e.flags.wpsAvailability),{},Ln({},t.layerId,t.status))}:{wpsAvailabilityIntersection:An(An({},e.flags.wpsAvailabilityIntersection),{},Ln({},t.layerId,t.status))})});case H:return An(An({},e),{},{selectedTool:t.tool});case q:var o,i,a,l,u,s,c,f,d,y;return An(An({},e),{},{selectedLayerType:t.layerId||"source"!==e.selectedLayerType?e.selectedLayerType:"",selectedLayerId:"source"===e.selectedLayerType?t.layerId:e.selectedLayerId,source:An(An({},e.source),{},{layerId:t.layerId,features:t.layerId!==(null===(o=e.source)||void 0===o?void 0:o.layerId)?[]:null==e||null===(i=e.source)||void 0===i?void 0:i.features,totalCount:t.layerId!==(null===(a=e.source)||void 0===a?void 0:a.layerId)?0:null==e||null===(l=e.source)||void 0===l?void 0:l.totalCount,currentPage:t.layerId!==(null===(u=e.source)||void 0===u?void 0:u.layerId)?0:null==e||null===(s=e.source)||void 0===s?void 0:s.currentPage,feature:t.layerId!==(null===(c=e.source)||void 0===c?void 0:c.layerId)||null==e||null===(f=e.source)||void 0===f?void 0:f.feature,featureId:t.layerId!==(null===(d=e.source)||void 0===d?void 0:d.layerId)?"":null==e||null===(y=e.source)||void 0===y?void 0:y.featureId})});case Y:var g,p,m;return An(An({},e),{},{source:An(An({},e.source),{},{featureId:t.featureId,currentPage:""===t.featureId?0:null==e||null===(g=e.source)||void 0===g?void 0:g.currentPage,features:""===t.featureId?[]:null==e||null===(p=e.source)||void 0===p?void 0:p.features,feature:""===t.featureId?{}:null==e||null===(m=e.source)||void 0===m?void 0:m.feature})});case $:return An(An({},e),{},{source:An(An({},e.source),{},{feature:t.feature,features:v()(e.source.features,(function(e){var r;return(null==e?void 0:e.id)===(null===(r=t.feature)||void 0===r?void 0:r.id)}))?e.source.features:[t.feature]})});case J:var b,E,h,I,T,O,A,w,N,oe;return An(An({},e),{},{selectedLayerType:t.layerId||"intersection"!==e.selectedLayerType?e.selectedLayerType:"",selectedLayerId:"intersection"===e.selectedLayerType?t.layerId:e.selectedLayerId,intersection:An(An({},e.intersection),{},{layerId:t.layerId,features:t.layerId!==(null===(b=e.intersection)||void 0===b?void 0:b.layerId)?[]:null==e||null===(E=e.intersection)||void 0===E?void 0:E.features,totalCount:t.layerId!==(null===(h=e.intersection)||void 0===h?void 0:h.layerId)?0:null==e||null===(I=e.intersection)||void 0===I?void 0:I.totalCount,currentPage:t.layerId!==(null===(T=e.intersection)||void 0===T?void 0:T.layerId)?0:null==e||null===(O=e.intersection)||void 0===O?void 0:O.currentPage,feature:t.layerId!==(null===(A=e.intersection)||void 0===A?void 0:A.layerId)||null==e||null===(w=e.intersection)||void 0===w?void 0:w.feature,featureId:t.layerId!==(null===(N=e.intersection)||void 0===N?void 0:N.layerId)?"":null==e||null===(oe=e.intersection)||void 0===oe?void 0:oe.featureId})});case V:var ie,ae,le;return An(An({},e),{},{intersection:An(An({},e.intersection),{},{featureId:t.featureId,currentPage:""===t.featureId?0:null==e||null===(ie=e.intersection)||void 0===ie?void 0:ie.currentPage,features:""===t.featureId?[]:null==e||null===(ae=e.intersection)||void 0===ae?void 0:ae.features,feature:""===t.featureId?{}:null==e||null===(le=e.intersection)||void 0===le?void 0:le.feature})});case K:return An(An({},e),{},{intersection:An(An({},e.intersection),{},{feature:t.feature,features:v()(e.intersection.features,(function(e){return e.id===t.feature.id}))?e.intersection.features:[t.feature]})});case X:return An(An({},e),{},{intersection:An(An({},e.intersection),{},{firstAttributeToRetain:t.firstAttributeToRetain})});case z:return An(An({},e),{},{intersection:An(An({},e.intersection),{},{secondAttributeToRetain:t.secondAttributeToRetain})});case Q:return An(An({},e),{},{intersection:An(An({},e.intersection),{},{intersectionMode:t.intersectionMode})});case ee:return An(An({},e),{},{intersection:An(An({},e.intersection),{},{percentagesEnabled:t.percentagesEnabled})});case te:return An(An({},e),{},{intersection:An(An({},e.intersection),{},{areasEnabled:t.areasEnabled})});case re:return An(An({},e),{},{selectedLayerType:t.source,selectedLayerId:"source"===t.source?e.source.layerId:e.intersection.layerId});case ne:var ue;return An(An({},e),{},{flags:An(An({},e.flags),{},{showHighlightLayers:!(null!=e&&null!==(ue=e.flags)&&void 0!==ue&&ue.showHighlightLayers)})});default:return e}}},epics:n})},569893:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});var n=r(227361),o=r.n(n),i=function(e){return o()(e,"additionallayers")||[]}},769877:e=>{var t=Math.floor,r=Math.random;e.exports=function(e,n){return e+t(r()*(n-e+1))}},683608:(e,t,r)=>{var n=r(769877),o=r(816612),i=r(418601),a=parseFloat,l=Math.min,u=Math.random;e.exports=function(e,t,r){if(r&&"boolean"!=typeof r&&o(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=i(e),void 0===t?(t=e,e=0):t=i(t)),e>t){var s=e;e=t,t=s}if(r||e%1||t%1){var c=u();return l(e+c*(t-e+a("1e-"+((c+"").length-1))),t)}return n(e,t)}}}]);