"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[8977],{808977:(t,e,o)=>{o.r(e),o.d(e,{default:()=>Y});var r=o(893379),n=o.n(r),i=o(949916);n()(i.Z,{insert:"head",singleton:!1}),i.Z.locals;var s=o(727418),a=o.n(s),c=o(611847),p=o(372971),l=o(843223),u=o(81090),h=o(922556),g=o(191736),f=o(868326),d=o(960188),m=o(57276),y=o(613958),b=o(351345),v=o(258958),w=o(447539),O=o(81332),k=o(823493),x=o.n(k),P=o(414293),E=o.n(P),j=o(199405);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function S(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function C(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?S(Object(o),!0).forEach((function(e){H(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):S(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function L(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(L=function(){return!!t})()}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function H(t,e,o){return(e=Z(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function Z(t){var e=function(t){if("object"!=A(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=A(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:e+""}var _=function(){var t=document.createElement("div");t.setAttribute("class","ol-popup");var e=document.createElement("a");e.setAttribute("class","ol-popup-close-btn"),e.setAttribute("href","#close"),e.innerHTML="x";var o=document.createElement("div");o.setAttribute("class","ol-popup-cnt-wrapper");var r=document.createElement("div");r.setAttribute("class","ol-popup-cnt"),o.appendChild(r);var n=document.createElement("div");n.setAttribute("class","ol-popup-tip-wrapper");var i=document.createElement("div");return i.setAttribute("class","ol-popup-tip"),n.appendChild(i),t.appendChild(e),t.appendChild(o),t.appendChild(n),t}(),T=function(t){function e(t,o){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),H(r=function(t,e,o){return e=D(e),function(t,e){if(e&&("object"==A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,L()?Reflect.construct(e,o||[],D(t).constructor):e.apply(t,o))}(this,e,[{state:"DISABLED"}]),"start",(function(){this.geolocate.on("error",this.errorHandler),this.follow=this.options.follow,this.geolocate.setTracking(!0),this.layer.setMap(this.map),this.map.addOverlay(this.overlay),this.options.showPopup&&(this.map.on("click",this.clickHandler),this.map.on("touch",this.clickHandler)),this.options.stopFollowingOnDrag&&this.map.on("pointerdrag",this.stopHandler),this.p?this._updatePosFt():this.set("state","LOCATING")})),H(r,"startFollow",(function(){this.follow=!0,this.options.stopFollowingOnDrag&&this.map.on("pointerdrag",this.stopHandler),this.p&&this._updatePosFt()})),H(r,"stop",(function(){this.geolocate.un("error",this.errorHandler),this.geolocate.setTracking(!1),this.popup.hide=!0,this.map.removeOverlay(this.overlay),this.layer.setMap(null),this.options.showPopup&&(this.map.un("click",this.clickHandler),this.map.un("touch",this.clickHandler)),this.options.stopFollowingOnDrag&&this.map.un("pointerdrag",this.stopHandler),this.set("state","DISABLED")})),H(r,"stopFollow",(function(){this.follow=!1,this.map.un("pointerdrag",this.stopHandler),this.set("state","ENABLED")})),H(r,"_updatePosFt",(function(){var t=this.get("state"),e=this.follow?"FOLLOWING":"ENABLED";e!==t&&this.set("state",e);var o=this.geolocate.getPosition();this.p=o;var r=new d.Z([parseFloat(o[0]),parseFloat(o[1])]);if(this.options.drawCircle)if(null===this.geolocate.getAccuracyGeometry()){var n=new m.Z([parseFloat(o[0]),parseFloat(o[1])],this.geolocate.getAccuracy());this.posFt.setGeometry(new y.Z([r,n]))}else{var i=this.geolocate.getAccuracyGeometry();this.posFt.setGeometry(new y.Z([r,i]))}else this.posFt.setGeometry(new y.Z([r]));var s=this.geolocate.getHeading();if(this.posFt.setProperties({heading:s}),this.popup.hidden||this._updatePopUpCnt(),this.follow&&this.updateView(r),this.options.remainActive||this.geolocate.setTracking(!1),"true"===(0,c.vl)(window.location.search).locateDebug){var a=document.getElementById("OL_LOCATION_DEBUG");a||((a=document.createElement("div")).setAttribute("id","OL_LOCATION_DEBUG"),a.setAttribute("style","position: absolute; bottom: 0; width: 100%; height: 200px; z-index:100000; background: rgba(5,5,5,.5)"),document.body.appendChild(a));var p=this.geolocate.getSpeed();a.innerHTML="<pre>\n                Position: ".concat(o[0],", ").concat(o[1],",\n                Heading: ").concat(s,"\n                speed: ").concat(p,"\n            </pre>")}})),H(r,"updateView",(function(t){this.follow&&(this.map.getView().setCenter(t.getCoordinates()),this.options.keepCurrentZoomLevel||this.map.getView().setZoom(this.options.locateOptions.maxZoom))})),H(r,"_updatePopUpCnt",(function(){var t,e;this.options.metric?(t=this.geolocate.getAccuracy(),e=this.options.strings.metersUnit):(t=Math.round(3.2808399*this.geolocate.getAccuracy()),e=this.options.strings.feetUnit);var o=this.options.strings.popup.replace("{distance}",t);this.popCnt.innerHTML=o.replace("{unit}",e),this.overlay.setPosition(this.posFt.getGeometry().getGeometries()[0].getCoordinates()),this.popup.hidden=!1})),H(r,"onLocationError",(function(t){alert(t.message)})),H(r,"mapClick",(function(t){var e=this.map.forEachFeatureAtPixel(t.pixel,(function(t){return t}));e&&"_locate-pos"===e.get("id")&&this.popup.hidden?this._updatePopUpCnt():this.popup.hidden||(_.hidden=!0)})),H(r,"_getDefaultStyles",(function(){var t=this,e="#2A93EE",o={fill:new b.Z({color:"rgba(19,106,236,0.15)"}),stroke:new v.Z({color:"rgba(19,106,236,1)",width:2})},r=(0,j.w)({color:e,svgAttributes:'width="300" height="300"'}),n=(0,j.B)({color:e,svgAttributes:'width="300" height="300"'});return function(e){var i,s=null===(i=e.getProperties())||void 0===i?void 0:i.heading,a=t.geolocate.getSpeed();return!E()(s)&&a>t.options.locateOptions.speedThreshold?new w.ZP(C({image:new O.Z({imgSize:[300,300],anchorXUnits:"fraction",anchorYUnits:"fraction",anchor:[.5,.5],scale:.2,rotation:null!=s?s:0,opacity:1,src:"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(r)})},o)):new w.ZP(C({image:new O.Z({imgSize:[300,300],anchorXUnits:"fraction",anchorYUnits:"fraction",anchor:[.5,.5],scale:.2,rotation:null!=s?s:0,opacity:1,src:"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(n)})},o))}})),H(r,"setStrings",(function(t){this.options.strings=a()({},this.options.strings,t)})),H(r,"setTrackingOptions",(function(t){this.geolocate&&(this.geolocate.setTrackingOptions(t),this.options.locateOptions=C({},t))})),r.map=t;var n={drawCircle:!0,follow:!0,stopFollowingOnDrag:!1,remainActive:!0,style:r._getDefaultStyles()||{},metric:!0,onLocationError:r.onLocationError,keepCurrentZoomLevel:!1,showPopup:!0,strings:{metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point"},locateOptions:{speedThreshold:.8,maximumAge:2e3,enableHighAccuracy:!1,timeout:1e4,maxZoom:18}};return r.options=a()({},n,o||{}),r.geolocate=new f.Z({projection:r.map.getView().getProjection(),trackingOptions:r.options.locateOptions}),r.updateHandler=r._updatePosFt.bind(r),r.geolocate.on("change:position",r.options.locateOptions.rateControl?x()(r.updateHandler,r.options.locateOptions.rateControl):r.updateHandler),r.geolocate.on("change:heading",(function(){var t=r.geolocate.getHeading();r.geolocate.getSpeed()>r.options.locateOptions.speedThreshold&&r.posFt.setProperties({heading:t})})),r.popup=_,r.popup.hidden=!0,r.popCnt=_.getElementsByClassName("ol-popup-cnt")[0],r.overlay=new l.Z({element:r.popup,positioning:"top-center",stopEvent:!1}),r.layer=new g.Z({source:new h.Z({useSpatialIndex:!1})}),r.posFt=new u.Z({geometry:r.geolocate.getAccuracyGeometry(),properties:{heading:r.geolocate.getHeading()},name:"position",id:"_locate-pos"}),r.posFt.setStyle(r.options.style),r.layer.getSource().addFeature(r.posFt),r.clickHandler=r.mapClick.bind(r),r.stopHandler=r.stopFollow.bind(r),r.errorHandler=r.options.onLocationError.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(e,t),o=e,Object.defineProperty(o,"prototype",{writable:!1}),o;var o}(p.Z);const U=T;function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function G(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M(r.key),r)}}function I(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function N(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?I(Object(o),!0).forEach((function(e){z(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):I(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function z(t,e,o){return(e=M(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function M(t){var e=function(t){if("object"!=B(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=B(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==B(e)?e:e+""}var V={follow:!0,remainActive:!0,metric:!0,stopFollowingOnDrag:!0,keepCurrentZoomLevel:!1,locateOptions:{speedThreshold:.8,maximumAge:2e3,enableHighAccuracy:!0,timeout:1e4,maxZoom:18}};function R(t){return N(N(N({},V),t),{},{locateOptions:N(N({},V.locateOptions),t.locateOptions)})}var W=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"start",value:function(t){var e=t.map,o=t.options,r=t.messages,n=t.status,i=t.onStateChange,s=t.onLocationError;this.locate=new U(e,R(o)),this.locate.setStrings(r),this.locate.options.onLocationError=s,this.locate.on("propertychange",(function(t){i(t.target.get(t.key))})),this.configureLocate(n)}},{key:"update",value:function(t){var e=t.status,o=t.messages,r=t.options;this.configureLocate(e),this.locate.setStrings(o),this.locate.setTrackingOptions(R(r).locateOptions)}},{key:"clear",value:function(){}},{key:"configureLocate",value:function(t){var e=this.locate.get("state");"ENABLED"===t&&"DISABLED"===e?this.locate.start():"FOLLOWING"===t&&"ENABLED"===e?this.locate.startFollow():"DISABLED"===t&&this.locate.stop()}}],e&&G(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const Y=W},199405:(t,e,o)=>{o.d(e,{w:()=>n,B:()=>i});var r=8;function n(t){var e=t.color,o=void 0===e?"#2A93EE":e,n=t.svgAttributes,i=t.strokeWidth,s=void 0===i?r:i;return'<svg xmlns="http://www.w3.org/2000/svg" '.concat(n,' viewBox="0 0 100 100" xml:space="preserve">\n\t\t<g transform="matrix(0.2 0 0 0.2 49.8 50.19)">\n            <linearGradient gradientUnits="userSpaceOnUse" gradientTransform="matrix(1 0 0 1 -65 -65)" x1="65" y1="130" x2="65" y2="0">\n                <stop offset="100%" style="stop-color:rgba(0, 132, 202, 1);"/>\n                <stop offset="100%" style="stop-color:rgba(0, 0, 255, 1);"/>\n            </linearGradient>\n            <circle style="stroke: rgb(255,255,255); stroke-width: ').concat(s,"; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: ").concat(o,'; fill-rule: nonzero; opacity: 1;" vector-effect="non-scaling-stroke" cx="0" cy="0" r="65"/>\n        </g>\n        <g transform="matrix(-0.12 -0.22 0.22 -0.12 47.11 20.53)">\n            <polygon style="stroke: rgb(255,255,255); stroke-width: ').concat(s,"; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: ").concat(o,'; fill-rule: nonzero; opacity: 1;" vector-effect="non-scaling-stroke" points="0,-42.5 50,42.5 -50,42.5 "/>\n        </g>\n    </svg>')}function i(t){var e=t.color,o=void 0===e?"#2A93EE":e,n=t.svgAttributes,i=t.strokeWidth,s=void 0===i?r:i;return'<svg xmlns="http://www.w3.org/2000/svg" '.concat(n,' viewBox="0 0 100 100" xml:space="preserve">\n\t\t<g transform="matrix(0.2 0 0 0.2 49.8 50.19)">\n            <linearGradient gradientUnits="userSpaceOnUse" gradientTransform="matrix(1 0 0 1 -65 -65)" x1="65" y1="130" x2="65" y2="0">\n                <stop offset="100%" style="stop-color:rgba(0, 132, 202, 1);"/>\n                <stop offset="100%" style="stop-color:rgba(0, 0, 255, 1);"/>\n            </linearGradient>\n            <circle style="stroke: rgb(255,255,255); stroke-width: ').concat(s,"; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: ").concat(o,'; fill-rule: nonzero; opacity: 1;" vector-effect="non-scaling-stroke" cx="0" cy="0" r="65"/>\n        </g>\n    </svg>')}},949916:(t,e,o)=>{o.d(e,{Z:()=>i});var r=o(923645),n=o.n(r)()((function(t){return t[1]}));n.push([t.id,'.msgapi .ol-popup {\r\n    position: absolute;\r\n    text-align: center;\r\n    font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\r\n    -ms-transform: translate(-50%,-100%); /* IE 9 */\r\n    -webkit-transform: translate(-50%,-100%); /* Safari */\r\n    transform: translate(-50%,-100%);\r\n}\r\n.msgapi a.ol-popup-close-btn {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  padding: 4px 4px 0 0;\r\n  text-align: center;\r\n  width: 18px;\r\n  height: 14px;\r\n  font: 16px/14px Tahoma, Verdana, sans-serif;\r\n  color: #c3c3c3;\r\n  text-decoration: none;\r\n  font-weight: bold;\r\n  background: transparent;\r\n}\r\n.msgapi .ol-popup-cnt-wrapper {\r\n  padding: 1px;\r\n  text-align: left;\r\n  border-radius: 12px;\r\n}\r\n.msgapi .ol-popup-cnt-wrapper, .msgapi .ol-popup-tip {\r\n  background: white;\r\n  box-shadow: 0 3px 14px rgba(0,0,0,0.4);\r\n}\r\n.msgapi .ol-popup-cnt {\r\n  margin: 13px 19px;\r\n  line-height: 1.4;\r\n   white-space: nowrap;\r\n\r\n}\r\n.msgapi .ol-popup-tip-wrapper {\r\n  margin: 0 auto;\r\n  width: 40px;\r\n  height: 20px;\r\n  position: relative;\r\n  overflow: hidden;\r\n\r\n}\r\n.msgapi .ol-popup-tip {\r\n  width: 17px;\r\n  height: 17px;\r\n  padding: 1px;\r\n  margin: -10px auto 0;\r\n  -webkit-transform: rotate(45deg);\r\n  -moz-transform: rotate(45deg);\r\n  -ms-transform: rotate(45deg);\r\n  -o-transform: rotate(45deg);\r\n  transform: rotate(45deg);\r\n}\r\n',""]);const i=n}}]);